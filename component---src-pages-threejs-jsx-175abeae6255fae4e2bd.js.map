{"version":3,"file":"component---src-pages-threejs-jsx-175abeae6255fae4e2bd.js","mappings":"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","sources":["webpack://lock-dot-com/./node_modules/three/examples/jsm/loaders/GLTFLoader.js","webpack://lock-dot-com/./src/components/models/tree.jsx","webpack://lock-dot-com/./src/pages/threejs.jsx"],"sourcesContent":["import _slicedToArray from \"/home/runner/work/Personal-Website/Personal-Website/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _assertThisInitialized from \"/home/runner/work/Personal-Website/Personal-Website/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"/home/runner/work/Personal-Website/Personal-Website/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _classCallCheck from \"/home/runner/work/Personal-Website/Personal-Website/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/runner/work/Personal-Website/Personal-Website/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/runner/work/Personal-Website/Personal-Website/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/home/runner/work/Personal-Website/Personal-Website/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/home/runner/work/Personal-Website/Personal-Website/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { AnimationClip, Bone, Box3, BufferAttribute, BufferGeometry, ClampToEdgeWrapping, Color, DirectionalLight, DoubleSide, FileLoader, FrontSide, Group, ImageBitmapLoader, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, Line, LineBasicMaterial, LineLoop, LineSegments, LinearFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, Loader, LoaderUtils, Material, MathUtils, Matrix4, Mesh, MeshBasicMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MirroredRepeatWrapping, NearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NumberKeyframeTrack, Object3D, OrthographicCamera, PerspectiveCamera, PointLight, Points, PointsMaterial, PropertyBinding, Quaternion, QuaternionKeyframeTrack, RepeatWrapping, Skeleton, SkinnedMesh, Sphere, SpotLight, TangentSpaceNormalMap, Texture, TextureLoader, TriangleFanDrawMode, TriangleStripDrawMode, Vector2, Vector3, VectorKeyframeTrack, sRGBEncoding } from 'three';\n\nvar GLTFLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(GLTFLoader, _Loader);\n\n  var _super = _createSuper(GLTFLoader);\n\n  function GLTFLoader(manager) {\n    var _this;\n\n    _classCallCheck(this, GLTFLoader);\n\n    _this = _super.call(this, manager);\n    _this.dracoLoader = null;\n    _this.ktx2Loader = null;\n    _this.meshoptDecoder = null;\n    _this.pluginCallbacks = [];\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsClearcoatExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFTextureBasisUExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFTextureWebPExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsSheenExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsTransmissionExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsVolumeExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsIorExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMaterialsSpecularExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFLightsExtension(parser);\n    });\n\n    _this.register(function (parser) {\n      return new GLTFMeshoptCompression(parser);\n    });\n\n    return _this;\n  }\n\n  _createClass(GLTFLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var resourcePath;\n\n      if (this.resourcePath !== '') {\n        resourcePath = this.resourcePath;\n      } else if (this.path !== '') {\n        resourcePath = this.path;\n      } else {\n        resourcePath = LoaderUtils.extractUrlBase(url);\n      } // Tells the LoadingManager to track an extra item, which resolves after\n      // the model is fully loaded. This means the count of items loaded will\n      // be incorrect, but ensures manager.onLoad() does not fire early.\n\n\n      this.manager.itemStart(url);\n\n      var _onError = function _onError(e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      };\n\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(this.withCredentials);\n      loader.load(url, function (data) {\n        try {\n          scope.parse(data, resourcePath, function (gltf) {\n            onLoad(gltf);\n            scope.manager.itemEnd(url);\n          }, _onError);\n        } catch (e) {\n          _onError(e);\n        }\n      }, onProgress, _onError);\n    }\n  }, {\n    key: \"setDRACOLoader\",\n    value: function setDRACOLoader(dracoLoader) {\n      this.dracoLoader = dracoLoader;\n      return this;\n    }\n  }, {\n    key: \"setDDSLoader\",\n    value: function setDDSLoader() {\n      throw new Error('THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".');\n    }\n  }, {\n    key: \"setKTX2Loader\",\n    value: function setKTX2Loader(ktx2Loader) {\n      this.ktx2Loader = ktx2Loader;\n      return this;\n    }\n  }, {\n    key: \"setMeshoptDecoder\",\n    value: function setMeshoptDecoder(meshoptDecoder) {\n      this.meshoptDecoder = meshoptDecoder;\n      return this;\n    }\n  }, {\n    key: \"register\",\n    value: function register(callback) {\n      if (this.pluginCallbacks.indexOf(callback) === -1) {\n        this.pluginCallbacks.push(callback);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister(callback) {\n      if (this.pluginCallbacks.indexOf(callback) !== -1) {\n        this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(data, path, onLoad, onError) {\n      var content;\n      var extensions = {};\n      var plugins = {};\n\n      if (typeof data === 'string') {\n        content = data;\n      } else {\n        var magic = LoaderUtils.decodeText(new Uint8Array(data, 0, 4));\n\n        if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n          try {\n            extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n          } catch (error) {\n            if (onError) onError(error);\n            return;\n          }\n\n          content = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n        } else {\n          content = LoaderUtils.decodeText(new Uint8Array(data));\n        }\n      }\n\n      var json = JSON.parse(content);\n\n      if (json.asset === undefined || json.asset.version[0] < 2) {\n        if (onError) onError(new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.'));\n        return;\n      }\n\n      var parser = new GLTFParser(json, {\n        path: path || this.resourcePath || '',\n        crossOrigin: this.crossOrigin,\n        requestHeader: this.requestHeader,\n        manager: this.manager,\n        ktx2Loader: this.ktx2Loader,\n        meshoptDecoder: this.meshoptDecoder\n      });\n      parser.fileLoader.setRequestHeader(this.requestHeader);\n\n      for (var i = 0; i < this.pluginCallbacks.length; i++) {\n        var plugin = this.pluginCallbacks[i](parser);\n        plugins[plugin.name] = plugin; // Workaround to avoid determining as unknown extension\n        // in addUnknownExtensionsToUserData().\n        // Remove this workaround if we move all the existing\n        // extension handlers to plugin system\n\n        extensions[plugin.name] = true;\n      }\n\n      if (json.extensionsUsed) {\n        for (var _i = 0; _i < json.extensionsUsed.length; ++_i) {\n          var extensionName = json.extensionsUsed[_i];\n          var extensionsRequired = json.extensionsRequired || [];\n\n          switch (extensionName) {\n            case EXTENSIONS.KHR_MATERIALS_UNLIT:\n              extensions[extensionName] = new GLTFMaterialsUnlitExtension();\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n              extensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n              break;\n\n            case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n              extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n              break;\n\n            case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n              extensions[extensionName] = new GLTFTextureTransformExtension();\n              break;\n\n            case EXTENSIONS.KHR_MESH_QUANTIZATION:\n              extensions[extensionName] = new GLTFMeshQuantizationExtension();\n              break;\n\n            default:\n              if (extensionsRequired.indexOf(extensionName) >= 0 && plugins[extensionName] === undefined) {\n                console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n              }\n\n          }\n        }\n      }\n\n      parser.setExtensions(extensions);\n      parser.setPlugins(plugins);\n      parser.parse(onLoad, onError);\n    }\n  }, {\n    key: \"parseAsync\",\n    value: function parseAsync(data, path) {\n      var scope = this;\n      return new Promise(function (resolve, reject) {\n        scope.parse(data, path, resolve, reject);\n      });\n    }\n  }]);\n\n  return GLTFLoader;\n}(Loader);\n/* GLTFREGISTRY */\n\n\nfunction GLTFRegistry() {\n  var objects = {};\n  return {\n    get: function get(key) {\n      return objects[key];\n    },\n    add: function add(key, object) {\n      objects[key] = object;\n    },\n    remove: function remove(key) {\n      delete objects[key];\n    },\n    removeAll: function removeAll() {\n      objects = {};\n    }\n  };\n}\n/*********************************/\n\n/********** EXTENSIONS ***********/\n\n/*********************************/\n\n\nvar EXTENSIONS = {\n  KHR_BINARY_GLTF: 'KHR_binary_glTF',\n  KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n  KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n  KHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n  KHR_MATERIALS_IOR: 'KHR_materials_ior',\n  KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n  KHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n  KHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n  KHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n  KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n  KHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n  KHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n  KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n  KHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n  EXT_TEXTURE_WEBP: 'EXT_texture_webp',\n  EXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\n\nvar GLTFLightsExtension = /*#__PURE__*/function () {\n  function GLTFLightsExtension(parser) {\n    _classCallCheck(this, GLTFLightsExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL; // Object3D instance caches\n\n    this.cache = {\n      refs: {},\n      uses: {}\n    };\n  }\n\n  _createClass(GLTFLightsExtension, [{\n    key: \"_markDefs\",\n    value: function _markDefs() {\n      var parser = this.parser;\n      var nodeDefs = this.parser.json.nodes || [];\n\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.extensions && nodeDef.extensions[this.name] && nodeDef.extensions[this.name].light !== undefined) {\n          parser._addNodeRef(this.cache, nodeDef.extensions[this.name].light);\n        }\n      }\n    }\n  }, {\n    key: \"_loadLight\",\n    value: function _loadLight(lightIndex) {\n      var parser = this.parser;\n      var cacheKey = 'light:' + lightIndex;\n      var dependency = parser.cache.get(cacheKey);\n      if (dependency) return dependency;\n      var json = parser.json;\n      var extensions = json.extensions && json.extensions[this.name] || {};\n      var lightDefs = extensions.lights || [];\n      var lightDef = lightDefs[lightIndex];\n      var lightNode;\n      var color = new Color(0xffffff);\n      if (lightDef.color !== undefined) color.fromArray(lightDef.color);\n      var range = lightDef.range !== undefined ? lightDef.range : 0;\n\n      switch (lightDef.type) {\n        case 'directional':\n          lightNode = new DirectionalLight(color);\n          lightNode.target.position.set(0, 0, -1);\n          lightNode.add(lightNode.target);\n          break;\n\n        case 'point':\n          lightNode = new PointLight(color);\n          lightNode.distance = range;\n          break;\n\n        case 'spot':\n          lightNode = new SpotLight(color);\n          lightNode.distance = range; // Handle spotlight properties.\n\n          lightDef.spot = lightDef.spot || {};\n          lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n          lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n          lightNode.angle = lightDef.spot.outerConeAngle;\n          lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n          lightNode.target.position.set(0, 0, -1);\n          lightNode.add(lightNode.target);\n          break;\n\n        default:\n          throw new Error('THREE.GLTFLoader: Unexpected light type: ' + lightDef.type);\n      } // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n      // here, because node-level parsing will only override position if explicitly specified.\n\n\n      lightNode.position.set(0, 0, 0);\n      lightNode.decay = 2;\n      if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n      lightNode.name = parser.createUniqueName(lightDef.name || 'light_' + lightIndex);\n      dependency = Promise.resolve(lightNode);\n      parser.cache.add(cacheKey, dependency);\n      return dependency;\n    }\n  }, {\n    key: \"createNodeAttachment\",\n    value: function createNodeAttachment(nodeIndex) {\n      var self = this;\n      var parser = this.parser;\n      var json = parser.json;\n      var nodeDef = json.nodes[nodeIndex];\n      var lightDef = nodeDef.extensions && nodeDef.extensions[this.name] || {};\n      var lightIndex = lightDef.light;\n      if (lightIndex === undefined) return null;\n      return this._loadLight(lightIndex).then(function (light) {\n        return parser._getNodeRef(self.cache, lightIndex, light);\n      });\n    }\n  }]);\n\n  return GLTFLightsExtension;\n}();\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\n\n\nvar GLTFMaterialsUnlitExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsUnlitExtension() {\n    _classCallCheck(this, GLTFMaterialsUnlitExtension);\n\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n  }\n\n  _createClass(GLTFMaterialsUnlitExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return MeshBasicMaterial;\n    }\n  }, {\n    key: \"extendParams\",\n    value: function extendParams(materialParams, materialDef, parser) {\n      var pending = [];\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n      var metallicRoughness = materialDef.pbrMetallicRoughness;\n\n      if (metallicRoughness) {\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n          var array = metallicRoughness.baseColorFactor;\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture, sRGBEncoding));\n        }\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsUnlitExtension;\n}();\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\n\n\nvar GLTFMaterialsClearcoatExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsClearcoatExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsClearcoatExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n  }\n\n  _createClass(GLTFMaterialsClearcoatExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.clearcoatFactor !== undefined) {\n        materialParams.clearcoat = extension.clearcoatFactor;\n      }\n\n      if (extension.clearcoatTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatMap', extension.clearcoatTexture));\n      }\n\n      if (extension.clearcoatRoughnessFactor !== undefined) {\n        materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n      }\n\n      if (extension.clearcoatRoughnessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture));\n      }\n\n      if (extension.clearcoatNormalTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture));\n\n        if (extension.clearcoatNormalTexture.scale !== undefined) {\n          var scale = extension.clearcoatNormalTexture.scale;\n          materialParams.clearcoatNormalScale = new Vector2(scale, scale);\n        }\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsClearcoatExtension;\n}();\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\n\n\nvar GLTFMaterialsSheenExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsSheenExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsSheenExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n  }\n\n  _createClass(GLTFMaterialsSheenExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      materialParams.sheenColor = new Color(0, 0, 0);\n      materialParams.sheenRoughness = 0;\n      materialParams.sheen = 1;\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.sheenColorFactor !== undefined) {\n        materialParams.sheenColor.fromArray(extension.sheenColorFactor);\n      }\n\n      if (extension.sheenRoughnessFactor !== undefined) {\n        materialParams.sheenRoughness = extension.sheenRoughnessFactor;\n      }\n\n      if (extension.sheenColorTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'sheenColorMap', extension.sheenColorTexture, sRGBEncoding));\n      }\n\n      if (extension.sheenRoughnessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsSheenExtension;\n}();\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\n\n\nvar GLTFMaterialsTransmissionExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsTransmissionExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsTransmissionExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n  }\n\n  _createClass(GLTFMaterialsTransmissionExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n\n      if (extension.transmissionFactor !== undefined) {\n        materialParams.transmission = extension.transmissionFactor;\n      }\n\n      if (extension.transmissionTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'transmissionMap', extension.transmissionTexture));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsTransmissionExtension;\n}();\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\n\n\nvar GLTFMaterialsVolumeExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsVolumeExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsVolumeExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n  }\n\n  _createClass(GLTFMaterialsVolumeExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n      materialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n      if (extension.thicknessTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'thicknessMap', extension.thicknessTexture));\n      }\n\n      materialParams.attenuationDistance = extension.attenuationDistance || 0;\n      var colorArray = extension.attenuationColor || [1, 1, 1];\n      materialParams.attenuationColor = new Color(colorArray[0], colorArray[1], colorArray[2]);\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsVolumeExtension;\n}();\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\n\n\nvar GLTFMaterialsIorExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsIorExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsIorExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_IOR;\n  }\n\n  _createClass(GLTFMaterialsIorExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var extension = materialDef.extensions[this.name];\n      materialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n      return Promise.resolve();\n    }\n  }]);\n\n  return GLTFMaterialsIorExtension;\n}();\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\n\n\nvar GLTFMaterialsSpecularExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsSpecularExtension(parser) {\n    _classCallCheck(this, GLTFMaterialsSpecularExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n  }\n\n  _createClass(GLTFMaterialsSpecularExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType(materialIndex) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) return null;\n      return MeshPhysicalMaterial;\n    }\n  }, {\n    key: \"extendMaterialParams\",\n    value: function extendMaterialParams(materialIndex, materialParams) {\n      var parser = this.parser;\n      var materialDef = parser.json.materials[materialIndex];\n\n      if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n        return Promise.resolve();\n      }\n\n      var pending = [];\n      var extension = materialDef.extensions[this.name];\n      materialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n      if (extension.specularTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'specularIntensityMap', extension.specularTexture));\n      }\n\n      var colorArray = extension.specularColorFactor || [1, 1, 1];\n      materialParams.specularColor = new Color(colorArray[0], colorArray[1], colorArray[2]);\n\n      if (extension.specularColorTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'specularColorMap', extension.specularColorTexture, sRGBEncoding));\n      }\n\n      return Promise.all(pending);\n    }\n  }]);\n\n  return GLTFMaterialsSpecularExtension;\n}();\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\n\n\nvar GLTFTextureBasisUExtension = /*#__PURE__*/function () {\n  function GLTFTextureBasisUExtension(parser) {\n    _classCallCheck(this, GLTFTextureBasisUExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n  }\n\n  _createClass(GLTFTextureBasisUExtension, [{\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var parser = this.parser;\n      var json = parser.json;\n      var textureDef = json.textures[textureIndex];\n\n      if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n        return null;\n      }\n\n      var extension = textureDef.extensions[this.name];\n      var loader = parser.options.ktx2Loader;\n\n      if (!loader) {\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n          throw new Error('THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures');\n        } else {\n          // Assumes that the extension is optional and that a fallback texture is present\n          return null;\n        }\n      }\n\n      return parser.loadTextureImage(textureIndex, extension.source, loader);\n    }\n  }]);\n\n  return GLTFTextureBasisUExtension;\n}();\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\n\n\nvar GLTFTextureWebPExtension = /*#__PURE__*/function () {\n  function GLTFTextureWebPExtension(parser) {\n    _classCallCheck(this, GLTFTextureWebPExtension);\n\n    this.parser = parser;\n    this.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n    this.isSupported = null;\n  }\n\n  _createClass(GLTFTextureWebPExtension, [{\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var name = this.name;\n      var parser = this.parser;\n      var json = parser.json;\n      var textureDef = json.textures[textureIndex];\n\n      if (!textureDef.extensions || !textureDef.extensions[name]) {\n        return null;\n      }\n\n      var extension = textureDef.extensions[name];\n      var source = json.images[extension.source];\n      var loader = parser.textureLoader;\n\n      if (source.uri) {\n        var handler = parser.options.manager.getHandler(source.uri);\n        if (handler !== null) loader = handler;\n      }\n\n      return this.detectSupport().then(function (isSupported) {\n        if (isSupported) return parser.loadTextureImage(textureIndex, extension.source, loader);\n\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\n          throw new Error('THREE.GLTFLoader: WebP required by asset but unsupported.');\n        } // Fall back to PNG or JPEG.\n\n\n        return parser.loadTexture(textureIndex);\n      });\n    }\n  }, {\n    key: \"detectSupport\",\n    value: function detectSupport() {\n      if (!this.isSupported) {\n        this.isSupported = new Promise(function (resolve) {\n          var image = new Image(); // Lossy test image. Support for lossy images doesn't guarantee support for all\n          // WebP images, unfortunately.\n\n          image.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n          image.onload = image.onerror = function () {\n            resolve(image.height === 1);\n          };\n        });\n      }\n\n      return this.isSupported;\n    }\n  }]);\n\n  return GLTFTextureWebPExtension;\n}();\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\n\n\nvar GLTFMeshoptCompression = /*#__PURE__*/function () {\n  function GLTFMeshoptCompression(parser) {\n    _classCallCheck(this, GLTFMeshoptCompression);\n\n    this.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n    this.parser = parser;\n  }\n\n  _createClass(GLTFMeshoptCompression, [{\n    key: \"loadBufferView\",\n    value: function loadBufferView(index) {\n      var json = this.parser.json;\n      var bufferView = json.bufferViews[index];\n\n      if (bufferView.extensions && bufferView.extensions[this.name]) {\n        var extensionDef = bufferView.extensions[this.name];\n        var buffer = this.parser.getDependency('buffer', extensionDef.buffer);\n        var decoder = this.parser.options.meshoptDecoder;\n\n        if (!decoder || !decoder.supported) {\n          if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\n            throw new Error('THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files');\n          } else {\n            // Assumes that the extension is optional and that fallback buffer data is present\n            return null;\n          }\n        }\n\n        return Promise.all([buffer, decoder.ready]).then(function (res) {\n          var byteOffset = extensionDef.byteOffset || 0;\n          var byteLength = extensionDef.byteLength || 0;\n          var count = extensionDef.count;\n          var stride = extensionDef.byteStride;\n          var result = new ArrayBuffer(count * stride);\n          var source = new Uint8Array(res[0], byteOffset, byteLength);\n          decoder.decodeGltfBuffer(new Uint8Array(result), count, stride, source, extensionDef.mode, extensionDef.filter);\n          return result;\n        });\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return GLTFMeshoptCompression;\n}();\n/* BINARY EXTENSION */\n\n\nvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nvar BINARY_EXTENSION_HEADER_LENGTH = 12;\nvar BINARY_EXTENSION_CHUNK_TYPES = {\n  JSON: 0x4E4F534A,\n  BIN: 0x004E4942\n};\n\nvar GLTFBinaryExtension = /*#__PURE__*/_createClass(function GLTFBinaryExtension(data) {\n  _classCallCheck(this, GLTFBinaryExtension);\n\n  this.name = EXTENSIONS.KHR_BINARY_GLTF;\n  this.content = null;\n  this.body = null;\n  var headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n  this.header = {\n    magic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n    version: headerView.getUint32(4, true),\n    length: headerView.getUint32(8, true)\n  };\n\n  if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n    throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');\n  } else if (this.header.version < 2.0) {\n    throw new Error('THREE.GLTFLoader: Legacy binary file detected.');\n  }\n\n  var chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n  var chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n  var chunkIndex = 0;\n\n  while (chunkIndex < chunkContentsLength) {\n    var chunkLength = chunkView.getUint32(chunkIndex, true);\n    chunkIndex += 4;\n    var chunkType = chunkView.getUint32(chunkIndex, true);\n    chunkIndex += 4;\n\n    if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n      var contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n      this.content = LoaderUtils.decodeText(contentArray);\n    } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n      var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n      this.body = data.slice(byteOffset, byteOffset + chunkLength);\n    } // Clients must ignore chunks with unknown types.\n\n\n    chunkIndex += chunkLength;\n  }\n\n  if (this.content === null) {\n    throw new Error('THREE.GLTFLoader: JSON content not found.');\n  }\n});\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\n\n\nvar GLTFDracoMeshCompressionExtension = /*#__PURE__*/function () {\n  function GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n    _classCallCheck(this, GLTFDracoMeshCompressionExtension);\n\n    if (!dracoLoader) {\n      throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');\n    }\n\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n    this.json = json;\n    this.dracoLoader = dracoLoader;\n    this.dracoLoader.preload();\n  }\n\n  _createClass(GLTFDracoMeshCompressionExtension, [{\n    key: \"decodePrimitive\",\n    value: function decodePrimitive(primitive, parser) {\n      var json = this.json;\n      var dracoLoader = this.dracoLoader;\n      var bufferViewIndex = primitive.extensions[this.name].bufferView;\n      var gltfAttributeMap = primitive.extensions[this.name].attributes;\n      var threeAttributeMap = {};\n      var attributeNormalizedMap = {};\n      var attributeTypeMap = {};\n\n      for (var attributeName in gltfAttributeMap) {\n        var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n        threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n      }\n\n      for (var _attributeName in primitive.attributes) {\n        var _threeAttributeName = ATTRIBUTES[_attributeName] || _attributeName.toLowerCase();\n\n        if (gltfAttributeMap[_attributeName] !== undefined) {\n          var accessorDef = json.accessors[primitive.attributes[_attributeName]];\n          var componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n          attributeTypeMap[_threeAttributeName] = componentType;\n          attributeNormalizedMap[_threeAttributeName] = accessorDef.normalized === true;\n        }\n      }\n\n      return parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n        return new Promise(function (resolve) {\n          dracoLoader.decodeDracoFile(bufferView, function (geometry) {\n            for (var _attributeName2 in geometry.attributes) {\n              var attribute = geometry.attributes[_attributeName2];\n              var normalized = attributeNormalizedMap[_attributeName2];\n              if (normalized !== undefined) attribute.normalized = normalized;\n            }\n\n            resolve(geometry);\n          }, threeAttributeMap, attributeTypeMap);\n        });\n      });\n    }\n  }]);\n\n  return GLTFDracoMeshCompressionExtension;\n}();\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\n\n\nvar GLTFTextureTransformExtension = /*#__PURE__*/function () {\n  function GLTFTextureTransformExtension() {\n    _classCallCheck(this, GLTFTextureTransformExtension);\n\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n  }\n\n  _createClass(GLTFTextureTransformExtension, [{\n    key: \"extendTexture\",\n    value: function extendTexture(texture, transform) {\n      if (transform.texCoord !== undefined) {\n        console.warn('THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.');\n      }\n\n      if (transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined) {\n        // See https://github.com/mrdoob/three.js/issues/21819.\n        return texture;\n      }\n\n      texture = texture.clone();\n\n      if (transform.offset !== undefined) {\n        texture.offset.fromArray(transform.offset);\n      }\n\n      if (transform.rotation !== undefined) {\n        texture.rotation = transform.rotation;\n      }\n\n      if (transform.scale !== undefined) {\n        texture.repeat.fromArray(transform.scale);\n      }\n\n      texture.needsUpdate = true;\n      return texture;\n    }\n  }]);\n\n  return GLTFTextureTransformExtension;\n}();\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Archived/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\n\n\nvar GLTFMeshStandardSGMaterial = /*#__PURE__*/function (_MeshStandardMaterial) {\n  _inherits(GLTFMeshStandardSGMaterial, _MeshStandardMaterial);\n\n  var _super2 = _createSuper(GLTFMeshStandardSGMaterial);\n\n  function GLTFMeshStandardSGMaterial(params) {\n    var _this2;\n\n    _classCallCheck(this, GLTFMeshStandardSGMaterial);\n\n    _this2 = _super2.call(this);\n    _this2.isGLTFSpecularGlossinessMaterial = true; //various chunks that need replacing\n\n    var specularMapParsFragmentChunk = ['#ifdef USE_SPECULARMAP', '\tuniform sampler2D specularMap;', '#endif'].join('\\n');\n    var glossinessMapParsFragmentChunk = ['#ifdef USE_GLOSSINESSMAP', '\tuniform sampler2D glossinessMap;', '#endif'].join('\\n');\n    var specularMapFragmentChunk = ['vec3 specularFactor = specular;', '#ifdef USE_SPECULARMAP', '\tvec4 texelSpecular = texture2D( specularMap, vUv );', '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tspecularFactor *= texelSpecular.rgb;', '#endif'].join('\\n');\n    var glossinessMapFragmentChunk = ['float glossinessFactor = glossiness;', '#ifdef USE_GLOSSINESSMAP', '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );', '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture', '\tglossinessFactor *= texelGlossiness.a;', '#endif'].join('\\n');\n    var lightPhysicalFragmentChunk = ['PhysicalMaterial material;', 'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );', 'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );', 'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );', 'material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.', 'material.roughness += geometryRoughness;', 'material.roughness = min( material.roughness, 1.0 );', 'material.specularColor = specularFactor;'].join('\\n');\n    var uniforms = {\n      specular: {\n        value: new Color().setHex(0xffffff)\n      },\n      glossiness: {\n        value: 1\n      },\n      specularMap: {\n        value: null\n      },\n      glossinessMap: {\n        value: null\n      }\n    };\n    _this2._extraUniforms = uniforms;\n\n    _this2.onBeforeCompile = function (shader) {\n      for (var uniformName in uniforms) {\n        shader.uniforms[uniformName] = uniforms[uniformName];\n      }\n\n      shader.fragmentShader = shader.fragmentShader.replace('uniform float roughness;', 'uniform vec3 specular;').replace('uniform float metalness;', 'uniform float glossiness;').replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk).replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk).replace('#include <roughnessmap_fragment>', specularMapFragmentChunk).replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk).replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\n    };\n\n    Object.defineProperties(_assertThisInitialized(_this2), {\n      specular: {\n        get: function get() {\n          return uniforms.specular.value;\n        },\n        set: function set(v) {\n          uniforms.specular.value = v;\n        }\n      },\n      specularMap: {\n        get: function get() {\n          return uniforms.specularMap.value;\n        },\n        set: function set(v) {\n          uniforms.specularMap.value = v;\n\n          if (v) {\n            this.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n          } else {\n            delete this.defines.USE_SPECULARMAP;\n          }\n        }\n      },\n      glossiness: {\n        get: function get() {\n          return uniforms.glossiness.value;\n        },\n        set: function set(v) {\n          uniforms.glossiness.value = v;\n        }\n      },\n      glossinessMap: {\n        get: function get() {\n          return uniforms.glossinessMap.value;\n        },\n        set: function set(v) {\n          uniforms.glossinessMap.value = v;\n\n          if (v) {\n            this.defines.USE_GLOSSINESSMAP = '';\n            this.defines.USE_UV = '';\n          } else {\n            delete this.defines.USE_GLOSSINESSMAP;\n            delete this.defines.USE_UV;\n          }\n        }\n      }\n    });\n    delete _this2.metalness;\n    delete _this2.roughness;\n    delete _this2.metalnessMap;\n    delete _this2.roughnessMap;\n\n    _this2.setValues(params);\n\n    return _this2;\n  }\n\n  _createClass(GLTFMeshStandardSGMaterial, [{\n    key: \"copy\",\n    value: function copy(source) {\n      _get(_getPrototypeOf(GLTFMeshStandardSGMaterial.prototype), \"copy\", this).call(this, source);\n\n      this.specularMap = source.specularMap;\n      this.specular.copy(source.specular);\n      this.glossinessMap = source.glossinessMap;\n      this.glossiness = source.glossiness;\n      delete this.metalness;\n      delete this.roughness;\n      delete this.metalnessMap;\n      delete this.roughnessMap;\n      return this;\n    }\n  }]);\n\n  return GLTFMeshStandardSGMaterial;\n}(MeshStandardMaterial);\n\nvar GLTFMaterialsPbrSpecularGlossinessExtension = /*#__PURE__*/function () {\n  function GLTFMaterialsPbrSpecularGlossinessExtension() {\n    _classCallCheck(this, GLTFMaterialsPbrSpecularGlossinessExtension);\n\n    this.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n    this.specularGlossinessParams = ['color', 'map', 'lightMap', 'lightMapIntensity', 'aoMap', 'aoMapIntensity', 'emissive', 'emissiveIntensity', 'emissiveMap', 'bumpMap', 'bumpScale', 'normalMap', 'normalMapType', 'displacementMap', 'displacementScale', 'displacementBias', 'specularMap', 'specular', 'glossinessMap', 'glossiness', 'alphaMap', 'envMap', 'envMapIntensity'];\n  }\n\n  _createClass(GLTFMaterialsPbrSpecularGlossinessExtension, [{\n    key: \"getMaterialType\",\n    value: function getMaterialType() {\n      return GLTFMeshStandardSGMaterial;\n    }\n  }, {\n    key: \"extendParams\",\n    value: function extendParams(materialParams, materialDef, parser) {\n      var pbrSpecularGlossiness = materialDef.extensions[this.name];\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n      var pending = [];\n\n      if (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n        var array = pbrSpecularGlossiness.diffuseFactor;\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n\n      if (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n        pending.push(parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture, sRGBEncoding));\n      }\n\n      materialParams.emissive = new Color(0.0, 0.0, 0.0);\n      materialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n      materialParams.specular = new Color(1.0, 1.0, 1.0);\n\n      if (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n        materialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n      }\n\n      if (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n        var specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n        pending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef));\n        pending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef, sRGBEncoding));\n      }\n\n      return Promise.all(pending);\n    }\n  }, {\n    key: \"createMaterial\",\n    value: function createMaterial(materialParams) {\n      var material = new GLTFMeshStandardSGMaterial(materialParams);\n      material.fog = true;\n      material.color = materialParams.color;\n      material.map = materialParams.map === undefined ? null : materialParams.map;\n      material.lightMap = null;\n      material.lightMapIntensity = 1.0;\n      material.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n      material.aoMapIntensity = 1.0;\n      material.emissive = materialParams.emissive;\n      material.emissiveIntensity = 1.0;\n      material.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n      material.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n      material.bumpScale = 1;\n      material.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n      material.normalMapType = TangentSpaceNormalMap;\n      if (materialParams.normalScale) material.normalScale = materialParams.normalScale;\n      material.displacementMap = null;\n      material.displacementScale = 1;\n      material.displacementBias = 0;\n      material.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n      material.specular = materialParams.specular;\n      material.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n      material.glossiness = materialParams.glossiness;\n      material.alphaMap = null;\n      material.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n      material.envMapIntensity = 1.0;\n      return material;\n    }\n  }]);\n\n  return GLTFMaterialsPbrSpecularGlossinessExtension;\n}();\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\n\n\nvar GLTFMeshQuantizationExtension = /*#__PURE__*/_createClass(function GLTFMeshQuantizationExtension() {\n  _classCallCheck(this, GLTFMeshQuantizationExtension);\n\n  this.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n});\n/*********************************/\n\n/********** INTERPOLATION ********/\n\n/*********************************/\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\n\nvar GLTFCubicSplineInterpolant = /*#__PURE__*/function (_Interpolant) {\n  _inherits(GLTFCubicSplineInterpolant, _Interpolant);\n\n  var _super3 = _createSuper(GLTFCubicSplineInterpolant);\n\n  function GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    _classCallCheck(this, GLTFCubicSplineInterpolant);\n\n    return _super3.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  _createClass(GLTFCubicSplineInterpolant, [{\n    key: \"copySampleValue_\",\n    value: function copySampleValue_(index) {\n      // Copies a sample value to the result buffer. See description of glTF\n      // CUBICSPLINE values layout in interpolate_() function below.\n      var result = this.resultBuffer,\n          values = this.sampleValues,\n          valueSize = this.valueSize,\n          offset = index * valueSize * 3 + valueSize;\n\n      for (var i = 0; i !== valueSize; i++) {\n        result[i] = values[offset + i];\n      }\n\n      return result;\n    }\n  }]);\n\n  return GLTFCubicSplineInterpolant;\n}(Interpolant);\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function (i1, t0, t, t1) {\n  var result = this.resultBuffer;\n  var values = this.sampleValues;\n  var stride = this.valueSize;\n  var stride2 = stride * 2;\n  var stride3 = stride * 3;\n  var td = t1 - t0;\n  var p = (t - t0) / td;\n  var pp = p * p;\n  var ppp = pp * p;\n  var offset1 = i1 * stride3;\n  var offset0 = offset1 - stride3;\n  var s2 = -2 * ppp + 3 * pp;\n  var s3 = ppp - pp;\n  var s0 = 1 - s2;\n  var s1 = s3 - pp + p; // Layout of keyframe output values for CUBICSPLINE animations:\n  //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\n  for (var i = 0; i !== stride; i++) {\n    var p0 = values[offset0 + i + stride]; // splineVertex_k\n\n    var m0 = values[offset0 + i + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n\n    var p1 = values[offset1 + i + stride]; // splineVertex_k+1\n\n    var m1 = values[offset1 + i] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n    result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n  }\n\n  return result;\n};\n\nvar _q = new Quaternion();\n\nvar GLTFCubicSplineQuaternionInterpolant = /*#__PURE__*/function (_GLTFCubicSplineInter) {\n  _inherits(GLTFCubicSplineQuaternionInterpolant, _GLTFCubicSplineInter);\n\n  var _super4 = _createSuper(GLTFCubicSplineQuaternionInterpolant);\n\n  function GLTFCubicSplineQuaternionInterpolant() {\n    _classCallCheck(this, GLTFCubicSplineQuaternionInterpolant);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(GLTFCubicSplineQuaternionInterpolant, [{\n    key: \"interpolate_\",\n    value: function interpolate_(i1, t0, t, t1) {\n      var result = _get(_getPrototypeOf(GLTFCubicSplineQuaternionInterpolant.prototype), \"interpolate_\", this).call(this, i1, t0, t, t1);\n\n      _q.fromArray(result).normalize().toArray(result);\n\n      return result;\n    }\n  }]);\n\n  return GLTFCubicSplineQuaternionInterpolant;\n}(GLTFCubicSplineInterpolant);\n/*********************************/\n\n/********** INTERNALS ************/\n\n/*********************************/\n\n/* CONSTANTS */\n\n\nvar WEBGL_CONSTANTS = {\n  FLOAT: 5126,\n  //FLOAT_MAT2: 35674,\n  FLOAT_MAT3: 35675,\n  FLOAT_MAT4: 35676,\n  FLOAT_VEC2: 35664,\n  FLOAT_VEC3: 35665,\n  FLOAT_VEC4: 35666,\n  LINEAR: 9729,\n  REPEAT: 10497,\n  SAMPLER_2D: 35678,\n  POINTS: 0,\n  LINES: 1,\n  LINE_LOOP: 2,\n  LINE_STRIP: 3,\n  TRIANGLES: 4,\n  TRIANGLE_STRIP: 5,\n  TRIANGLE_FAN: 6,\n  UNSIGNED_BYTE: 5121,\n  UNSIGNED_SHORT: 5123\n};\nvar WEBGL_COMPONENT_TYPES = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nvar WEBGL_FILTERS = {\n  9728: NearestFilter,\n  9729: LinearFilter,\n  9984: NearestMipmapNearestFilter,\n  9985: LinearMipmapNearestFilter,\n  9986: NearestMipmapLinearFilter,\n  9987: LinearMipmapLinearFilter\n};\nvar WEBGL_WRAPPINGS = {\n  33071: ClampToEdgeWrapping,\n  33648: MirroredRepeatWrapping,\n  10497: RepeatWrapping\n};\nvar WEBGL_TYPE_SIZES = {\n  'SCALAR': 1,\n  'VEC2': 2,\n  'VEC3': 3,\n  'VEC4': 4,\n  'MAT2': 4,\n  'MAT3': 9,\n  'MAT4': 16\n};\nvar ATTRIBUTES = {\n  POSITION: 'position',\n  NORMAL: 'normal',\n  TANGENT: 'tangent',\n  TEXCOORD_0: 'uv',\n  TEXCOORD_1: 'uv2',\n  COLOR_0: 'color',\n  WEIGHTS_0: 'skinWeight',\n  JOINTS_0: 'skinIndex'\n};\nvar PATH_PROPERTIES = {\n  scale: 'scale',\n  translation: 'position',\n  rotation: 'quaternion',\n  weights: 'morphTargetInfluences'\n};\nvar INTERPOLATION = {\n  CUBICSPLINE: undefined,\n  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n  // keyframe track will be initialized with a default interpolation type, then modified.\n  LINEAR: InterpolateLinear,\n  STEP: InterpolateDiscrete\n};\nvar ALPHA_MODES = {\n  OPAQUE: 'OPAQUE',\n  MASK: 'MASK',\n  BLEND: 'BLEND'\n};\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\n\nfunction createDefaultMaterial(cache) {\n  if (cache['DefaultMaterial'] === undefined) {\n    cache['DefaultMaterial'] = new MeshStandardMaterial({\n      color: 0xFFFFFF,\n      emissive: 0x000000,\n      metalness: 1,\n      roughness: 1,\n      transparent: false,\n      depthTest: true,\n      side: FrontSide\n    });\n  }\n\n  return cache['DefaultMaterial'];\n}\n\nfunction addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n  // Add unknown glTF extensions to an object's userData.\n  for (var name in objectDef.extensions) {\n    if (knownExtensions[name] === undefined) {\n      object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n      object.userData.gltfExtensions[name] = objectDef.extensions[name];\n    }\n  }\n}\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\n\n\nfunction assignExtrasToUserData(object, gltfDef) {\n  if (gltfDef.extras !== undefined) {\n    if (typeof gltfDef.extras === 'object') {\n      Object.assign(object.userData, gltfDef.extras);\n    } else {\n      console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n    }\n  }\n}\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addMorphTargets(geometry, targets, parser) {\n  var hasMorphPosition = false;\n  var hasMorphNormal = false;\n  var hasMorphColor = false;\n\n  for (var i = 0, il = targets.length; i < il; i++) {\n    var target = targets[i];\n    if (target.POSITION !== undefined) hasMorphPosition = true;\n    if (target.NORMAL !== undefined) hasMorphNormal = true;\n    if (target.COLOR_0 !== undefined) hasMorphColor = true;\n    if (hasMorphPosition && hasMorphNormal && hasMorphColor) break;\n  }\n\n  if (!hasMorphPosition && !hasMorphNormal && !hasMorphColor) return Promise.resolve(geometry);\n  var pendingPositionAccessors = [];\n  var pendingNormalAccessors = [];\n  var pendingColorAccessors = [];\n\n  for (var _i2 = 0, _il = targets.length; _i2 < _il; _i2++) {\n    var _target = targets[_i2];\n\n    if (hasMorphPosition) {\n      var pendingAccessor = _target.POSITION !== undefined ? parser.getDependency('accessor', _target.POSITION) : geometry.attributes.position;\n      pendingPositionAccessors.push(pendingAccessor);\n    }\n\n    if (hasMorphNormal) {\n      var _pendingAccessor = _target.NORMAL !== undefined ? parser.getDependency('accessor', _target.NORMAL) : geometry.attributes.normal;\n\n      pendingNormalAccessors.push(_pendingAccessor);\n    }\n\n    if (hasMorphColor) {\n      var _pendingAccessor2 = _target.COLOR_0 !== undefined ? parser.getDependency('accessor', _target.COLOR_0) : geometry.attributes.color;\n\n      pendingColorAccessors.push(_pendingAccessor2);\n    }\n  }\n\n  return Promise.all([Promise.all(pendingPositionAccessors), Promise.all(pendingNormalAccessors), Promise.all(pendingColorAccessors)]).then(function (accessors) {\n    var morphPositions = accessors[0];\n    var morphNormals = accessors[1];\n    var morphColors = accessors[2];\n    if (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n    if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n    if (hasMorphColor) geometry.morphAttributes.color = morphColors;\n    geometry.morphTargetsRelative = true;\n    return geometry;\n  });\n}\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\n\n\nfunction updateMorphTargets(mesh, meshDef) {\n  mesh.updateMorphTargets();\n\n  if (meshDef.weights !== undefined) {\n    for (var i = 0, il = meshDef.weights.length; i < il; i++) {\n      mesh.morphTargetInfluences[i] = meshDef.weights[i];\n    }\n  } // .extras has user-defined data, so check that .extras.targetNames is an array.\n\n\n  if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n    var targetNames = meshDef.extras.targetNames;\n\n    if (mesh.morphTargetInfluences.length === targetNames.length) {\n      mesh.morphTargetDictionary = {};\n\n      for (var _i3 = 0, _il2 = targetNames.length; _i3 < _il2; _i3++) {\n        mesh.morphTargetDictionary[targetNames[_i3]] = _i3;\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n    }\n  }\n}\n\nfunction createPrimitiveKey(primitiveDef) {\n  var dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n  var geometryKey;\n\n  if (dracoExtension) {\n    geometryKey = 'draco:' + dracoExtension.bufferView + ':' + dracoExtension.indices + ':' + createAttributesKey(dracoExtension.attributes);\n  } else {\n    geometryKey = primitiveDef.indices + ':' + createAttributesKey(primitiveDef.attributes) + ':' + primitiveDef.mode;\n  }\n\n  return geometryKey;\n}\n\nfunction createAttributesKey(attributes) {\n  var attributesKey = '';\n  var keys = Object.keys(attributes).sort();\n\n  for (var i = 0, il = keys.length; i < il; i++) {\n    attributesKey += keys[i] + ':' + attributes[keys[i]] + ';';\n  }\n\n  return attributesKey;\n}\n\nfunction getNormalizedComponentScale(constructor) {\n  // Reference:\n  // https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n  switch (constructor) {\n    case Int8Array:\n      return 1 / 127;\n\n    case Uint8Array:\n      return 1 / 255;\n\n    case Int16Array:\n      return 1 / 32767;\n\n    case Uint16Array:\n      return 1 / 65535;\n\n    default:\n      throw new Error('THREE.GLTFLoader: Unsupported normalized accessor component type.');\n  }\n}\n\nfunction getImageURIMimeType(uri) {\n  if (uri.search(/\\.jpe?g($|\\?)/i) > 0 || uri.search(/^data\\:image\\/jpeg/) === 0) return 'image/jpeg';\n  if (uri.search(/\\.webp($|\\?)/i) > 0 || uri.search(/^data\\:image\\/webp/) === 0) return 'image/webp';\n  return 'image/png';\n}\n/* GLTF PARSER */\n\n\nvar GLTFParser = /*#__PURE__*/function () {\n  function GLTFParser() {\n    var json = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, GLTFParser);\n\n    this.json = json;\n    this.extensions = {};\n    this.plugins = {};\n    this.options = options; // loader object cache\n\n    this.cache = new GLTFRegistry(); // associations between Three.js objects and glTF elements\n\n    this.associations = new Map(); // BufferGeometry caching\n\n    this.primitiveCache = {}; // Object3D instance caches\n\n    this.meshCache = {\n      refs: {},\n      uses: {}\n    };\n    this.cameraCache = {\n      refs: {},\n      uses: {}\n    };\n    this.lightCache = {\n      refs: {},\n      uses: {}\n    };\n    this.sourceCache = {};\n    this.textureCache = {}; // Track node names, to ensure no duplicates\n\n    this.nodeNamesUsed = {}; // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n    // expensive work of uploading a texture to the GPU off the main thread.\n\n    if (typeof createImageBitmap !== 'undefined' && /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === false) {\n      this.textureLoader = new ImageBitmapLoader(this.options.manager);\n    } else {\n      this.textureLoader = new TextureLoader(this.options.manager);\n    }\n\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n    this.textureLoader.setRequestHeader(this.options.requestHeader);\n    this.fileLoader = new FileLoader(this.options.manager);\n    this.fileLoader.setResponseType('arraybuffer');\n\n    if (this.options.crossOrigin === 'use-credentials') {\n      this.fileLoader.setWithCredentials(true);\n    }\n  }\n\n  _createClass(GLTFParser, [{\n    key: \"setExtensions\",\n    value: function setExtensions(extensions) {\n      this.extensions = extensions;\n    }\n  }, {\n    key: \"setPlugins\",\n    value: function setPlugins(plugins) {\n      this.plugins = plugins;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(onLoad, onError) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions; // Clear the loader cache\n\n      this.cache.removeAll(); // Mark the special nodes/meshes in json for efficient parse\n\n      this._invokeAll(function (ext) {\n        return ext._markDefs && ext._markDefs();\n      });\n\n      Promise.all(this._invokeAll(function (ext) {\n        return ext.beforeRoot && ext.beforeRoot();\n      })).then(function () {\n        return Promise.all([parser.getDependencies('scene'), parser.getDependencies('animation'), parser.getDependencies('camera')]);\n      }).then(function (dependencies) {\n        var result = {\n          scene: dependencies[0][json.scene || 0],\n          scenes: dependencies[0],\n          animations: dependencies[1],\n          cameras: dependencies[2],\n          asset: json.asset,\n          parser: parser,\n          userData: {}\n        };\n        addUnknownExtensionsToUserData(extensions, result, json);\n        assignExtrasToUserData(result, json);\n        Promise.all(parser._invokeAll(function (ext) {\n          return ext.afterRoot && ext.afterRoot(result);\n        })).then(function () {\n          onLoad(result);\n        });\n      }).catch(onError);\n    }\n    /**\n     * Marks the special nodes/meshes in json for efficient parse.\n     */\n\n  }, {\n    key: \"_markDefs\",\n    value: function _markDefs() {\n      var nodeDefs = this.json.nodes || [];\n      var skinDefs = this.json.skins || [];\n      var meshDefs = this.json.meshes || []; // Nothing in the node definition indicates whether it is a Bone or an\n      // Object3D. Use the skins' joint references to mark bones.\n\n      for (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n        var joints = skinDefs[skinIndex].joints;\n\n        for (var i = 0, il = joints.length; i < il; i++) {\n          nodeDefs[joints[i]].isBone = true;\n        }\n      } // Iterate over all nodes, marking references to shared resources,\n      // as well as skeleton joints.\n\n\n      for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n        var nodeDef = nodeDefs[nodeIndex];\n\n        if (nodeDef.mesh !== undefined) {\n          this._addNodeRef(this.meshCache, nodeDef.mesh); // Nothing in the mesh definition indicates whether it is\n          // a SkinnedMesh or Mesh. Use the node's mesh reference\n          // to mark SkinnedMesh if node has skin.\n\n\n          if (nodeDef.skin !== undefined) {\n            meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n          }\n        }\n\n        if (nodeDef.camera !== undefined) {\n          this._addNodeRef(this.cameraCache, nodeDef.camera);\n        }\n      }\n    }\n    /**\n     * Counts references to shared node / Object3D resources. These resources\n     * can be reused, or \"instantiated\", at multiple nodes in the scene\n     * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n     * be marked. Non-scenegraph resources (like Materials, Geometries, and\n     * Textures) can be reused directly and are not marked here.\n     *\n     * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n     */\n\n  }, {\n    key: \"_addNodeRef\",\n    value: function _addNodeRef(cache, index) {\n      if (index === undefined) return;\n\n      if (cache.refs[index] === undefined) {\n        cache.refs[index] = cache.uses[index] = 0;\n      }\n\n      cache.refs[index]++;\n    }\n    /** Returns a reference to a shared resource, cloning it if necessary. */\n\n  }, {\n    key: \"_getNodeRef\",\n    value: function _getNodeRef(cache, index, object) {\n      var _this3 = this;\n\n      if (cache.refs[index] <= 1) return object;\n      var ref = object.clone(); // Propagates mappings to the cloned object, prevents mappings on the\n      // original object from being lost.\n\n      var updateMappings = function updateMappings(original, clone) {\n        var mappings = _this3.associations.get(original);\n\n        if (mappings != null) {\n          _this3.associations.set(clone, mappings);\n        }\n\n        var _iterator = _createForOfIteratorHelper(original.children.entries()),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _step$value = _slicedToArray(_step.value, 2),\n                i = _step$value[0],\n                child = _step$value[1];\n\n            updateMappings(child, clone.children[i]);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      };\n\n      updateMappings(object, ref);\n      ref.name += '_instance_' + cache.uses[index]++;\n      return ref;\n    }\n  }, {\n    key: \"_invokeOne\",\n    value: function _invokeOne(func) {\n      var extensions = Object.values(this.plugins);\n      extensions.push(this);\n\n      for (var i = 0; i < extensions.length; i++) {\n        var result = func(extensions[i]);\n        if (result) return result;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_invokeAll\",\n    value: function _invokeAll(func) {\n      var extensions = Object.values(this.plugins);\n      extensions.unshift(this);\n      var pending = [];\n\n      for (var i = 0; i < extensions.length; i++) {\n        var result = func(extensions[i]);\n        if (result) pending.push(result);\n      }\n\n      return pending;\n    }\n    /**\n     * Requests the specified dependency asynchronously, with caching.\n     * @param {string} type\n     * @param {number} index\n     * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n     */\n\n  }, {\n    key: \"getDependency\",\n    value: function getDependency(type, index) {\n      var cacheKey = type + ':' + index;\n      var dependency = this.cache.get(cacheKey);\n\n      if (!dependency) {\n        switch (type) {\n          case 'scene':\n            dependency = this.loadScene(index);\n            break;\n\n          case 'node':\n            dependency = this.loadNode(index);\n            break;\n\n          case 'mesh':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadMesh && ext.loadMesh(index);\n            });\n            break;\n\n          case 'accessor':\n            dependency = this.loadAccessor(index);\n            break;\n\n          case 'bufferView':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadBufferView && ext.loadBufferView(index);\n            });\n            break;\n\n          case 'buffer':\n            dependency = this.loadBuffer(index);\n            break;\n\n          case 'material':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadMaterial && ext.loadMaterial(index);\n            });\n            break;\n\n          case 'texture':\n            dependency = this._invokeOne(function (ext) {\n              return ext.loadTexture && ext.loadTexture(index);\n            });\n            break;\n\n          case 'skin':\n            dependency = this.loadSkin(index);\n            break;\n\n          case 'animation':\n            dependency = this.loadAnimation(index);\n            break;\n\n          case 'camera':\n            dependency = this.loadCamera(index);\n            break;\n\n          default:\n            throw new Error('Unknown type: ' + type);\n        }\n\n        this.cache.add(cacheKey, dependency);\n      }\n\n      return dependency;\n    }\n    /**\n     * Requests all dependencies of the specified type asynchronously, with caching.\n     * @param {string} type\n     * @return {Promise<Array<Object>>}\n     */\n\n  }, {\n    key: \"getDependencies\",\n    value: function getDependencies(type) {\n      var dependencies = this.cache.get(type);\n\n      if (!dependencies) {\n        var parser = this;\n        var defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n        dependencies = Promise.all(defs.map(function (def, index) {\n          return parser.getDependency(type, index);\n        }));\n        this.cache.add(type, dependencies);\n      }\n\n      return dependencies;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"loadBuffer\",\n    value: function loadBuffer(bufferIndex) {\n      var bufferDef = this.json.buffers[bufferIndex];\n      var loader = this.fileLoader;\n\n      if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n        throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n      } // If present, GLB container is required to be the first buffer.\n\n\n      if (bufferDef.uri === undefined && bufferIndex === 0) {\n        return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n      }\n\n      var options = this.options;\n      return new Promise(function (resolve, reject) {\n        loader.load(LoaderUtils.resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n          reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n        });\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n     * @param {number} bufferViewIndex\n     * @return {Promise<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"loadBufferView\",\n    value: function loadBufferView(bufferViewIndex) {\n      var bufferViewDef = this.json.bufferViews[bufferViewIndex];\n      return this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n        var byteLength = bufferViewDef.byteLength || 0;\n        var byteOffset = bufferViewDef.byteOffset || 0;\n        return buffer.slice(byteOffset, byteOffset + byteLength);\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n     * @param {number} accessorIndex\n     * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n     */\n\n  }, {\n    key: \"loadAccessor\",\n    value: function loadAccessor(accessorIndex) {\n      var parser = this;\n      var json = this.json;\n      var accessorDef = this.json.accessors[accessorIndex];\n\n      if (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n        // Ignore empty accessors, which may be used to declare runtime\n        // information about attributes coming from another source (e.g. Draco\n        // compression extension).\n        return Promise.resolve(null);\n      }\n\n      var pendingBufferViews = [];\n\n      if (accessorDef.bufferView !== undefined) {\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n      } else {\n        pendingBufferViews.push(null);\n      }\n\n      if (accessorDef.sparse !== undefined) {\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n        pendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n      }\n\n      return Promise.all(pendingBufferViews).then(function (bufferViews) {\n        var bufferView = bufferViews[0];\n        var itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n        var TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType]; // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\n        var elementBytes = TypedArray.BYTES_PER_ELEMENT;\n        var itemBytes = elementBytes * itemSize;\n        var byteOffset = accessorDef.byteOffset || 0;\n        var byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[accessorDef.bufferView].byteStride : undefined;\n        var normalized = accessorDef.normalized === true;\n        var array, bufferAttribute; // The buffer is not interleaved if the stride is the item size in bytes.\n\n        if (byteStride && byteStride !== itemBytes) {\n          // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n          // This makes sure that IBA.count reflects accessor.count properly\n          var ibSlice = Math.floor(byteOffset / byteStride);\n          var ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n          var ib = parser.cache.get(ibCacheKey);\n\n          if (!ib) {\n            array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes); // Integer parameters to IB/IBA are in array elements, not bytes.\n\n            ib = new InterleavedBuffer(array, byteStride / elementBytes);\n            parser.cache.add(ibCacheKey, ib);\n          }\n\n          bufferAttribute = new InterleavedBufferAttribute(ib, itemSize, byteOffset % byteStride / elementBytes, normalized);\n        } else {\n          if (bufferView === null) {\n            array = new TypedArray(accessorDef.count * itemSize);\n          } else {\n            array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n          }\n\n          bufferAttribute = new BufferAttribute(array, itemSize, normalized);\n        } // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\n\n        if (accessorDef.sparse !== undefined) {\n          var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n          var TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n          var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n          var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n          var sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n          var sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n          if (bufferView !== null) {\n            // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n            bufferAttribute = new BufferAttribute(bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized);\n          }\n\n          for (var i = 0, il = sparseIndices.length; i < il; i++) {\n            var index = sparseIndices[i];\n            bufferAttribute.setX(index, sparseValues[i * itemSize]);\n            if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n            if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n            if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n            if (itemSize >= 5) throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n          }\n        }\n\n        return bufferAttribute;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n     * @param {number} textureIndex\n     * @return {Promise<THREE.Texture>}\n     */\n\n  }, {\n    key: \"loadTexture\",\n    value: function loadTexture(textureIndex) {\n      var json = this.json;\n      var options = this.options;\n      var textureDef = json.textures[textureIndex];\n      var sourceIndex = textureDef.source;\n      var sourceDef = json.images[sourceIndex];\n      var loader = this.textureLoader;\n\n      if (sourceDef.uri) {\n        var handler = options.manager.getHandler(sourceDef.uri);\n        if (handler !== null) loader = handler;\n      }\n\n      return this.loadTextureImage(textureIndex, sourceIndex, loader);\n    }\n  }, {\n    key: \"loadTextureImage\",\n    value: function loadTextureImage(textureIndex, sourceIndex, loader) {\n      var parser = this;\n      var json = this.json;\n      var textureDef = json.textures[textureIndex];\n      var sourceDef = json.images[sourceIndex];\n      var cacheKey = (sourceDef.uri || sourceDef.bufferView) + ':' + textureDef.sampler;\n\n      if (this.textureCache[cacheKey]) {\n        // See https://github.com/mrdoob/three.js/issues/21559.\n        return this.textureCache[cacheKey];\n      }\n\n      var promise = this.loadImageSource(sourceIndex, loader).then(function (texture) {\n        texture.flipY = false;\n        if (textureDef.name) texture.name = textureDef.name;\n        var samplers = json.samplers || {};\n        var sampler = samplers[textureDef.sampler] || {};\n        texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter;\n        texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter;\n        texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping;\n        texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping;\n        parser.associations.set(texture, {\n          textures: textureIndex\n        });\n        return texture;\n      }).catch(function () {\n        return null;\n      });\n      this.textureCache[cacheKey] = promise;\n      return promise;\n    }\n  }, {\n    key: \"loadImageSource\",\n    value: function loadImageSource(sourceIndex, loader) {\n      var parser = this;\n      var json = this.json;\n      var options = this.options;\n\n      if (this.sourceCache[sourceIndex] !== undefined) {\n        return this.sourceCache[sourceIndex].then(function (texture) {\n          return texture.clone();\n        });\n      }\n\n      var sourceDef = json.images[sourceIndex];\n      var URL = self.URL || self.webkitURL;\n      var sourceURI = sourceDef.uri || '';\n      var isObjectURL = false;\n\n      if (sourceDef.bufferView !== undefined) {\n        // Load binary image data from bufferView, if provided.\n        sourceURI = parser.getDependency('bufferView', sourceDef.bufferView).then(function (bufferView) {\n          isObjectURL = true;\n          var blob = new Blob([bufferView], {\n            type: sourceDef.mimeType\n          });\n          sourceURI = URL.createObjectURL(blob);\n          return sourceURI;\n        });\n      } else if (sourceDef.uri === undefined) {\n        throw new Error('THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView');\n      }\n\n      var promise = Promise.resolve(sourceURI).then(function (sourceURI) {\n        return new Promise(function (resolve, reject) {\n          var onLoad = resolve;\n\n          if (loader.isImageBitmapLoader === true) {\n            onLoad = function onLoad(imageBitmap) {\n              var texture = new Texture(imageBitmap);\n              texture.needsUpdate = true;\n              resolve(texture);\n            };\n          }\n\n          loader.load(LoaderUtils.resolveURL(sourceURI, options.path), onLoad, undefined, reject);\n        });\n      }).then(function (texture) {\n        // Clean up resources and configure Texture.\n        if (isObjectURL === true) {\n          URL.revokeObjectURL(sourceURI);\n        }\n\n        texture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType(sourceDef.uri);\n        return texture;\n      }).catch(function (error) {\n        console.error('THREE.GLTFLoader: Couldn\\'t load texture', sourceURI);\n        throw error;\n      });\n      this.sourceCache[sourceIndex] = promise;\n      return promise;\n    }\n    /**\n     * Asynchronously assigns a texture to the given material parameters.\n     * @param {Object} materialParams\n     * @param {string} mapName\n     * @param {Object} mapDef\n     * @return {Promise<Texture>}\n     */\n\n  }, {\n    key: \"assignTexture\",\n    value: function assignTexture(materialParams, mapName, mapDef, encoding) {\n      var parser = this;\n      return this.getDependency('texture', mapDef.index).then(function (texture) {\n        // Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n        // However, we will copy UV set 0 to UV set 1 on demand for aoMap\n        if (mapDef.texCoord !== undefined && mapDef.texCoord != 0 && !(mapName === 'aoMap' && mapDef.texCoord == 1)) {\n          console.warn('THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.');\n        }\n\n        if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n          var transform = mapDef.extensions !== undefined ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : undefined;\n\n          if (transform) {\n            var gltfReference = parser.associations.get(texture);\n            texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n            parser.associations.set(texture, gltfReference);\n          }\n        }\n\n        if (encoding !== undefined) {\n          texture.encoding = encoding;\n        }\n\n        materialParams[mapName] = texture;\n        return texture;\n      });\n    }\n    /**\n     * Assigns final material to a Mesh, Line, or Points instance. The instance\n     * already has a material (generated from the glTF material options alone)\n     * but reuse of the same glTF material may require multiple threejs materials\n     * to accommodate different primitive types, defines, etc. New materials will\n     * be created if necessary, and reused from a cache.\n     * @param  {Object3D} mesh Mesh, Line, or Points instance.\n     */\n\n  }, {\n    key: \"assignFinalMaterial\",\n    value: function assignFinalMaterial(mesh) {\n      var geometry = mesh.geometry;\n      var material = mesh.material;\n      var useDerivativeTangents = geometry.attributes.tangent === undefined;\n      var useVertexColors = geometry.attributes.color !== undefined;\n      var useFlatShading = geometry.attributes.normal === undefined;\n\n      if (mesh.isPoints) {\n        var cacheKey = 'PointsMaterial:' + material.uuid;\n        var pointsMaterial = this.cache.get(cacheKey);\n\n        if (!pointsMaterial) {\n          pointsMaterial = new PointsMaterial();\n          Material.prototype.copy.call(pointsMaterial, material);\n          pointsMaterial.color.copy(material.color);\n          pointsMaterial.map = material.map;\n          pointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n          this.cache.add(cacheKey, pointsMaterial);\n        }\n\n        material = pointsMaterial;\n      } else if (mesh.isLine) {\n        var _cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n        var lineMaterial = this.cache.get(_cacheKey);\n\n        if (!lineMaterial) {\n          lineMaterial = new LineBasicMaterial();\n          Material.prototype.copy.call(lineMaterial, material);\n          lineMaterial.color.copy(material.color);\n          this.cache.add(_cacheKey, lineMaterial);\n        }\n\n        material = lineMaterial;\n      } // Clone the material if it will be modified\n\n\n      if (useDerivativeTangents || useVertexColors || useFlatShading) {\n        var _cacheKey2 = 'ClonedMaterial:' + material.uuid + ':';\n\n        if (material.isGLTFSpecularGlossinessMaterial) _cacheKey2 += 'specular-glossiness:';\n        if (useDerivativeTangents) _cacheKey2 += 'derivative-tangents:';\n        if (useVertexColors) _cacheKey2 += 'vertex-colors:';\n        if (useFlatShading) _cacheKey2 += 'flat-shading:';\n        var cachedMaterial = this.cache.get(_cacheKey2);\n\n        if (!cachedMaterial) {\n          cachedMaterial = material.clone();\n          if (useVertexColors) cachedMaterial.vertexColors = true;\n          if (useFlatShading) cachedMaterial.flatShading = true;\n\n          if (useDerivativeTangents) {\n            // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n            if (cachedMaterial.normalScale) cachedMaterial.normalScale.y *= -1;\n            if (cachedMaterial.clearcoatNormalScale) cachedMaterial.clearcoatNormalScale.y *= -1;\n          }\n\n          this.cache.add(_cacheKey2, cachedMaterial);\n          this.associations.set(cachedMaterial, this.associations.get(material));\n        }\n\n        material = cachedMaterial;\n      } // workarounds for mesh and geometry\n\n\n      if (material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined) {\n        geometry.setAttribute('uv2', geometry.attributes.uv);\n      }\n\n      mesh.material = material;\n    }\n  }, {\n    key: \"getMaterialType\",\n    value: function\n      /* materialIndex */\n    getMaterialType() {\n      return MeshStandardMaterial;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n     * @param {number} materialIndex\n     * @return {Promise<Material>}\n     */\n\n  }, {\n    key: \"loadMaterial\",\n    value: function loadMaterial(materialIndex) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var materialDef = json.materials[materialIndex];\n      var materialType;\n      var materialParams = {};\n      var materialExtensions = materialDef.extensions || {};\n      var pending = [];\n\n      if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n        var sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n        materialType = sgExtension.getMaterialType();\n        pending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n      } else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n        var kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n        materialType = kmuExtension.getMaterialType();\n        pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n      } else {\n        // Specification:\n        // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n        var metallicRoughness = materialDef.pbrMetallicRoughness || {};\n        materialParams.color = new Color(1.0, 1.0, 1.0);\n        materialParams.opacity = 1.0;\n\n        if (Array.isArray(metallicRoughness.baseColorFactor)) {\n          var array = metallicRoughness.baseColorFactor;\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (metallicRoughness.baseColorTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture, sRGBEncoding));\n        }\n\n        materialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n        materialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n        if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n          pending.push(parser.assignTexture(materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture));\n          pending.push(parser.assignTexture(materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture));\n        }\n\n        materialType = this._invokeOne(function (ext) {\n          return ext.getMaterialType && ext.getMaterialType(materialIndex);\n        });\n        pending.push(Promise.all(this._invokeAll(function (ext) {\n          return ext.extendMaterialParams && ext.extendMaterialParams(materialIndex, materialParams);\n        })));\n      }\n\n      if (materialDef.doubleSided === true) {\n        materialParams.side = DoubleSide;\n      }\n\n      var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n      if (alphaMode === ALPHA_MODES.BLEND) {\n        materialParams.transparent = true; // See: https://github.com/mrdoob/three.js/issues/17706\n\n        materialParams.depthWrite = false;\n      } else {\n        materialParams.transparent = false;\n\n        if (alphaMode === ALPHA_MODES.MASK) {\n          materialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n        }\n      }\n\n      if (materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture));\n        materialParams.normalScale = new Vector2(1, 1);\n\n        if (materialDef.normalTexture.scale !== undefined) {\n          var scale = materialDef.normalTexture.scale;\n          materialParams.normalScale.set(scale, scale);\n        }\n      }\n\n      if (materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n        if (materialDef.occlusionTexture.strength !== undefined) {\n          materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n        }\n      }\n\n      if (materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial) {\n        materialParams.emissive = new Color().fromArray(materialDef.emissiveFactor);\n      }\n\n      if (materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial) {\n        pending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture, sRGBEncoding));\n      }\n\n      return Promise.all(pending).then(function () {\n        var material;\n\n        if (materialType === GLTFMeshStandardSGMaterial) {\n          material = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(materialParams);\n        } else {\n          material = new materialType(materialParams);\n        }\n\n        if (materialDef.name) material.name = materialDef.name;\n        assignExtrasToUserData(material, materialDef);\n        parser.associations.set(material, {\n          materials: materialIndex\n        });\n        if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n        return material;\n      });\n    }\n    /** When Object3D instances are targeted by animation, they need unique names. */\n\n  }, {\n    key: \"createUniqueName\",\n    value: function createUniqueName(originalName) {\n      var sanitizedName = PropertyBinding.sanitizeNodeName(originalName || '');\n      var name = sanitizedName;\n\n      for (var i = 1; this.nodeNamesUsed[name]; ++i) {\n        name = sanitizedName + '_' + i;\n      }\n\n      this.nodeNamesUsed[name] = true;\n      return name;\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n     *\n     * Creates BufferGeometries from primitives.\n     *\n     * @param {Array<GLTF.Primitive>} primitives\n     * @return {Promise<Array<BufferGeometry>>}\n     */\n\n  }, {\n    key: \"loadGeometries\",\n    value: function loadGeometries(primitives) {\n      var parser = this;\n      var extensions = this.extensions;\n      var cache = this.primitiveCache;\n\n      function createDracoPrimitive(primitive) {\n        return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(primitive, parser).then(function (geometry) {\n          return addPrimitiveAttributes(geometry, primitive, parser);\n        });\n      }\n\n      var pending = [];\n\n      for (var i = 0, il = primitives.length; i < il; i++) {\n        var primitive = primitives[i];\n        var cacheKey = createPrimitiveKey(primitive); // See if we've already created this geometry\n\n        var cached = cache[cacheKey];\n\n        if (cached) {\n          // Use the cached geometry if it exists\n          pending.push(cached.promise);\n        } else {\n          var geometryPromise = void 0;\n\n          if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n            // Use DRACO geometry if available\n            geometryPromise = createDracoPrimitive(primitive);\n          } else {\n            // Otherwise create a new geometry\n            geometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser);\n          } // Cache this geometry\n\n\n          cache[cacheKey] = {\n            primitive: primitive,\n            promise: geometryPromise\n          };\n          pending.push(geometryPromise);\n        }\n      }\n\n      return Promise.all(pending);\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n     * @param {number} meshIndex\n     * @return {Promise<Group|Mesh|SkinnedMesh>}\n     */\n\n  }, {\n    key: \"loadMesh\",\n    value: function loadMesh(meshIndex) {\n      var parser = this;\n      var json = this.json;\n      var extensions = this.extensions;\n      var meshDef = json.meshes[meshIndex];\n      var primitives = meshDef.primitives;\n      var pending = [];\n\n      for (var i = 0, il = primitives.length; i < il; i++) {\n        var material = primitives[i].material === undefined ? createDefaultMaterial(this.cache) : this.getDependency('material', primitives[i].material);\n        pending.push(material);\n      }\n\n      pending.push(parser.loadGeometries(primitives));\n      return Promise.all(pending).then(function (results) {\n        var materials = results.slice(0, results.length - 1);\n        var geometries = results[results.length - 1];\n        var meshes = [];\n\n        for (var _i4 = 0, _il3 = geometries.length; _i4 < _il3; _i4++) {\n          var geometry = geometries[_i4];\n          var primitive = primitives[_i4]; // 1. create Mesh\n\n          var mesh = void 0;\n          var _material = materials[_i4];\n\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLES || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN || primitive.mode === undefined) {\n            // .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n            mesh = meshDef.isSkinnedMesh === true ? new SkinnedMesh(geometry, _material) : new Mesh(geometry, _material);\n\n            if (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n              // we normalize floating point skin weight array to fix malformed assets (see #15319)\n              // it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n              mesh.normalizeSkinWeights();\n            }\n\n            if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n              mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode);\n            } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n              mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode);\n            }\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n            mesh = new LineSegments(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n            mesh = new Line(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n            mesh = new LineLoop(geometry, _material);\n          } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n            mesh = new Points(geometry, _material);\n          } else {\n            throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n          }\n\n          if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n            updateMorphTargets(mesh, meshDef);\n          }\n\n          mesh.name = parser.createUniqueName(meshDef.name || 'mesh_' + meshIndex);\n          assignExtrasToUserData(mesh, meshDef);\n          if (primitive.extensions) addUnknownExtensionsToUserData(extensions, mesh, primitive);\n          parser.assignFinalMaterial(mesh);\n          meshes.push(mesh);\n        }\n\n        for (var _i5 = 0, _il4 = meshes.length; _i5 < _il4; _i5++) {\n          parser.associations.set(meshes[_i5], {\n            meshes: meshIndex,\n            primitives: _i5\n          });\n        }\n\n        if (meshes.length === 1) {\n          return meshes[0];\n        }\n\n        var group = new Group();\n        parser.associations.set(group, {\n          meshes: meshIndex\n        });\n\n        for (var _i6 = 0, _il5 = meshes.length; _i6 < _il5; _i6++) {\n          group.add(meshes[_i6]);\n        }\n\n        return group;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n     * @param {number} cameraIndex\n     * @return {Promise<THREE.Camera>}\n     */\n\n  }, {\n    key: \"loadCamera\",\n    value: function loadCamera(cameraIndex) {\n      var camera;\n      var cameraDef = this.json.cameras[cameraIndex];\n      var params = cameraDef[cameraDef.type];\n\n      if (!params) {\n        console.warn('THREE.GLTFLoader: Missing camera parameters.');\n        return;\n      }\n\n      if (cameraDef.type === 'perspective') {\n        camera = new PerspectiveCamera(MathUtils.radToDeg(params.yfov), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6);\n      } else if (cameraDef.type === 'orthographic') {\n        camera = new OrthographicCamera(-params.xmag, params.xmag, params.ymag, -params.ymag, params.znear, params.zfar);\n      }\n\n      if (cameraDef.name) camera.name = this.createUniqueName(cameraDef.name);\n      assignExtrasToUserData(camera, cameraDef);\n      return Promise.resolve(camera);\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n     * @param {number} skinIndex\n     * @return {Promise<Object>}\n     */\n\n  }, {\n    key: \"loadSkin\",\n    value: function loadSkin(skinIndex) {\n      var skinDef = this.json.skins[skinIndex];\n      var skinEntry = {\n        joints: skinDef.joints\n      };\n\n      if (skinDef.inverseBindMatrices === undefined) {\n        return Promise.resolve(skinEntry);\n      }\n\n      return this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n        skinEntry.inverseBindMatrices = accessor;\n        return skinEntry;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n     * @param {number} animationIndex\n     * @return {Promise<AnimationClip>}\n     */\n\n  }, {\n    key: \"loadAnimation\",\n    value: function loadAnimation(animationIndex) {\n      var json = this.json;\n      var animationDef = json.animations[animationIndex];\n      var pendingNodes = [];\n      var pendingInputAccessors = [];\n      var pendingOutputAccessors = [];\n      var pendingSamplers = [];\n      var pendingTargets = [];\n\n      for (var i = 0, il = animationDef.channels.length; i < il; i++) {\n        var channel = animationDef.channels[i];\n        var sampler = animationDef.samplers[channel.sampler];\n        var target = channel.target;\n        var name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\n        var input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n        var output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n        pendingNodes.push(this.getDependency('node', name));\n        pendingInputAccessors.push(this.getDependency('accessor', input));\n        pendingOutputAccessors.push(this.getDependency('accessor', output));\n        pendingSamplers.push(sampler);\n        pendingTargets.push(target);\n      }\n\n      return Promise.all([Promise.all(pendingNodes), Promise.all(pendingInputAccessors), Promise.all(pendingOutputAccessors), Promise.all(pendingSamplers), Promise.all(pendingTargets)]).then(function (dependencies) {\n        var nodes = dependencies[0];\n        var inputAccessors = dependencies[1];\n        var outputAccessors = dependencies[2];\n        var samplers = dependencies[3];\n        var targets = dependencies[4];\n        var tracks = [];\n\n        var _loop = function _loop(_i7, _il6) {\n          var node = nodes[_i7];\n          var inputAccessor = inputAccessors[_i7];\n          var outputAccessor = outputAccessors[_i7];\n          var sampler = samplers[_i7];\n          var target = targets[_i7];\n          if (node === undefined) return \"continue\";\n          node.updateMatrix();\n          node.matrixAutoUpdate = true;\n          var TypedKeyframeTrack = void 0;\n\n          switch (PATH_PROPERTIES[target.path]) {\n            case PATH_PROPERTIES.weights:\n              TypedKeyframeTrack = NumberKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES.rotation:\n              TypedKeyframeTrack = QuaternionKeyframeTrack;\n              break;\n\n            case PATH_PROPERTIES.position:\n            case PATH_PROPERTIES.scale:\n            default:\n              TypedKeyframeTrack = VectorKeyframeTrack;\n              break;\n          }\n\n          var targetName = node.name ? node.name : node.uuid;\n          var interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : InterpolateLinear;\n          var targetNames = [];\n\n          if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n            node.traverse(function (object) {\n              if (object.morphTargetInfluences) {\n                targetNames.push(object.name ? object.name : object.uuid);\n              }\n            });\n          } else {\n            targetNames.push(targetName);\n          }\n\n          var outputArray = outputAccessor.array;\n\n          if (outputAccessor.normalized) {\n            var scale = getNormalizedComponentScale(outputArray.constructor);\n            var scaled = new Float32Array(outputArray.length);\n\n            for (var j = 0, jl = outputArray.length; j < jl; j++) {\n              scaled[j] = outputArray[j] * scale;\n            }\n\n            outputArray = scaled;\n          }\n\n          for (var _j = 0, _jl = targetNames.length; _j < _jl; _j++) {\n            var track = new TypedKeyframeTrack(targetNames[_j] + '.' + PATH_PROPERTIES[target.path], inputAccessor.array, outputArray, interpolation); // Override interpolation with custom factory method.\n\n            if (sampler.interpolation === 'CUBICSPLINE') {\n              track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n                // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n                // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n                // must be divided by three to get the interpolant's sampleSize argument.\n                var interpolantType = this instanceof QuaternionKeyframeTrack ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n                return new interpolantType(this.times, this.values, this.getValueSize() / 3, result);\n              }; // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\n\n              track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n            }\n\n            tracks.push(track);\n          }\n        };\n\n        for (var _i7 = 0, _il6 = nodes.length; _i7 < _il6; _i7++) {\n          var _ret = _loop(_i7, _il6);\n\n          if (_ret === \"continue\") continue;\n        }\n\n        var name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n        return new AnimationClip(name, undefined, tracks);\n      });\n    }\n  }, {\n    key: \"createNodeMesh\",\n    value: function createNodeMesh(nodeIndex) {\n      var json = this.json;\n      var parser = this;\n      var nodeDef = json.nodes[nodeIndex];\n      if (nodeDef.mesh === undefined) return null;\n      return parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n        var node = parser._getNodeRef(parser.meshCache, nodeDef.mesh, mesh); // if weights are provided on the node, override weights on the mesh.\n\n\n        if (nodeDef.weights !== undefined) {\n          node.traverse(function (o) {\n            if (!o.isMesh) return;\n\n            for (var i = 0, il = nodeDef.weights.length; i < il; i++) {\n              o.morphTargetInfluences[i] = nodeDef.weights[i];\n            }\n          });\n        }\n\n        return node;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n     * @param {number} nodeIndex\n     * @return {Promise<Object3D>}\n     */\n\n  }, {\n    key: \"loadNode\",\n    value: function loadNode(nodeIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var parser = this;\n      var nodeDef = json.nodes[nodeIndex]; // reserve node's name before its dependencies, so the root has the intended name.\n\n      var nodeName = nodeDef.name ? parser.createUniqueName(nodeDef.name) : '';\n      return function () {\n        var pending = [];\n\n        var meshPromise = parser._invokeOne(function (ext) {\n          return ext.createNodeMesh && ext.createNodeMesh(nodeIndex);\n        });\n\n        if (meshPromise) {\n          pending.push(meshPromise);\n        }\n\n        if (nodeDef.camera !== undefined) {\n          pending.push(parser.getDependency('camera', nodeDef.camera).then(function (camera) {\n            return parser._getNodeRef(parser.cameraCache, nodeDef.camera, camera);\n          }));\n        }\n\n        parser._invokeAll(function (ext) {\n          return ext.createNodeAttachment && ext.createNodeAttachment(nodeIndex);\n        }).forEach(function (promise) {\n          pending.push(promise);\n        });\n\n        return Promise.all(pending);\n      }().then(function (objects) {\n        var node; // .isBone isn't in glTF spec. See ._markDefs\n\n        if (nodeDef.isBone === true) {\n          node = new Bone();\n        } else if (objects.length > 1) {\n          node = new Group();\n        } else if (objects.length === 1) {\n          node = objects[0];\n        } else {\n          node = new Object3D();\n        }\n\n        if (node !== objects[0]) {\n          for (var i = 0, il = objects.length; i < il; i++) {\n            node.add(objects[i]);\n          }\n        }\n\n        if (nodeDef.name) {\n          node.userData.name = nodeDef.name;\n          node.name = nodeName;\n        }\n\n        assignExtrasToUserData(node, nodeDef);\n        if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n        if (nodeDef.matrix !== undefined) {\n          var matrix = new Matrix4();\n          matrix.fromArray(nodeDef.matrix);\n          node.applyMatrix4(matrix);\n        } else {\n          if (nodeDef.translation !== undefined) {\n            node.position.fromArray(nodeDef.translation);\n          }\n\n          if (nodeDef.rotation !== undefined) {\n            node.quaternion.fromArray(nodeDef.rotation);\n          }\n\n          if (nodeDef.scale !== undefined) {\n            node.scale.fromArray(nodeDef.scale);\n          }\n        }\n\n        if (!parser.associations.has(node)) {\n          parser.associations.set(node, {});\n        }\n\n        parser.associations.get(node).nodes = nodeIndex;\n        return node;\n      });\n    }\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n     * @param {number} sceneIndex\n     * @return {Promise<Group>}\n     */\n\n  }, {\n    key: \"loadScene\",\n    value: function loadScene(sceneIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var sceneDef = this.json.scenes[sceneIndex];\n      var parser = this; // Loader returns Group, not Scene.\n      // See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\n      var scene = new Group();\n      if (sceneDef.name) scene.name = parser.createUniqueName(sceneDef.name);\n      assignExtrasToUserData(scene, sceneDef);\n      if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n      var nodeIds = sceneDef.nodes || [];\n      var pending = [];\n\n      for (var i = 0, il = nodeIds.length; i < il; i++) {\n        pending.push(buildNodeHierarchy(nodeIds[i], scene, json, parser));\n      }\n\n      return Promise.all(pending).then(function () {\n        // Removes dangling associations, associations that reference a node that\n        // didn't make it into the scene.\n        var reduceAssociations = function reduceAssociations(node) {\n          var reducedAssociations = new Map();\n\n          var _iterator2 = _createForOfIteratorHelper(parser.associations),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var _step2$value = _slicedToArray(_step2.value, 2),\n                  key = _step2$value[0],\n                  value = _step2$value[1];\n\n              if (key instanceof Material || key instanceof Texture) {\n                reducedAssociations.set(key, value);\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          node.traverse(function (node) {\n            var mappings = parser.associations.get(node);\n\n            if (mappings != null) {\n              reducedAssociations.set(node, mappings);\n            }\n          });\n          return reducedAssociations;\n        };\n\n        parser.associations = reduceAssociations(scene);\n        return scene;\n      });\n    }\n  }]);\n\n  return GLTFParser;\n}();\n\nfunction buildNodeHierarchy(nodeId, parentObject, json, parser) {\n  var nodeDef = json.nodes[nodeId];\n  return parser.getDependency('node', nodeId).then(function (node) {\n    if (nodeDef.skin === undefined) return node; // build skeleton here as well\n\n    var skinEntry;\n    return parser.getDependency('skin', nodeDef.skin).then(function (skin) {\n      skinEntry = skin;\n      var pendingJoints = [];\n\n      for (var i = 0, il = skinEntry.joints.length; i < il; i++) {\n        pendingJoints.push(parser.getDependency('node', skinEntry.joints[i]));\n      }\n\n      return Promise.all(pendingJoints);\n    }).then(function (jointNodes) {\n      node.traverse(function (mesh) {\n        if (!mesh.isMesh) return;\n        var bones = [];\n        var boneInverses = [];\n\n        for (var j = 0, jl = jointNodes.length; j < jl; j++) {\n          var jointNode = jointNodes[j];\n\n          if (jointNode) {\n            bones.push(jointNode);\n            var mat = new Matrix4();\n\n            if (skinEntry.inverseBindMatrices !== undefined) {\n              mat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n            }\n\n            boneInverses.push(mat);\n          } else {\n            console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[j]);\n          }\n        }\n\n        mesh.bind(new Skeleton(bones, boneInverses), mesh.matrixWorld);\n      });\n      return node;\n    });\n  }).then(function (node) {\n    // build node hierachy\n    parentObject.add(node);\n    var pending = [];\n\n    if (nodeDef.children) {\n      var children = nodeDef.children;\n\n      for (var i = 0, il = children.length; i < il; i++) {\n        var child = children[i];\n        pending.push(buildNodeHierarchy(child, node, json, parser));\n      }\n    }\n\n    return Promise.all(pending);\n  });\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\n\n\nfunction computeBounds(geometry, primitiveDef, parser) {\n  var attributes = primitiveDef.attributes;\n  var box = new Box3();\n\n  if (attributes.POSITION !== undefined) {\n    var accessor = parser.json.accessors[attributes.POSITION];\n    var min = accessor.min;\n    var max = accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n    if (min !== undefined && max !== undefined) {\n      box.set(new Vector3(min[0], min[1], min[2]), new Vector3(max[0], max[1], max[2]));\n\n      if (accessor.normalized) {\n        var boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\n        box.min.multiplyScalar(boxScale);\n        box.max.multiplyScalar(boxScale);\n      }\n    } else {\n      console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n      return;\n    }\n  } else {\n    return;\n  }\n\n  var targets = primitiveDef.targets;\n\n  if (targets !== undefined) {\n    var maxDisplacement = new Vector3();\n    var vector = new Vector3();\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n      var target = targets[i];\n\n      if (target.POSITION !== undefined) {\n        var _accessor = parser.json.accessors[target.POSITION];\n        var _min = _accessor.min;\n        var _max = _accessor.max; // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n        if (_min !== undefined && _max !== undefined) {\n          // we need to get max of absolute components because target weight is [-1,1]\n          vector.setX(Math.max(Math.abs(_min[0]), Math.abs(_max[0])));\n          vector.setY(Math.max(Math.abs(_min[1]), Math.abs(_max[1])));\n          vector.setZ(Math.max(Math.abs(_min[2]), Math.abs(_max[2])));\n\n          if (_accessor.normalized) {\n            var _boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[_accessor.componentType]);\n\n            vector.multiplyScalar(_boxScale);\n          } // Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n          // to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n          // are used to implement key-frame animations and as such only two are active at a time - this results in very large\n          // boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\n\n          maxDisplacement.max(vector);\n        } else {\n          console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n        }\n      }\n    } // As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\n\n    box.expandByVector(maxDisplacement);\n  }\n\n  geometry.boundingBox = box;\n  var sphere = new Sphere();\n  box.getCenter(sphere.center);\n  sphere.radius = box.min.distanceTo(box.max) / 2;\n  geometry.boundingSphere = sphere;\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\n\n\nfunction addPrimitiveAttributes(geometry, primitiveDef, parser) {\n  var attributes = primitiveDef.attributes;\n  var pending = [];\n\n  function assignAttributeAccessor(accessorIndex, attributeName) {\n    return parser.getDependency('accessor', accessorIndex).then(function (accessor) {\n      geometry.setAttribute(attributeName, accessor);\n    });\n  }\n\n  for (var gltfAttributeName in attributes) {\n    var threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase(); // Skip attributes already provided by e.g. Draco extension.\n\n    if (threeAttributeName in geometry.attributes) continue;\n    pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n  }\n\n  if (primitiveDef.indices !== undefined && !geometry.index) {\n    var accessor = parser.getDependency('accessor', primitiveDef.indices).then(function (accessor) {\n      geometry.setIndex(accessor);\n    });\n    pending.push(accessor);\n  }\n\n  assignExtrasToUserData(geometry, primitiveDef);\n  computeBounds(geometry, primitiveDef, parser);\n  return Promise.all(pending).then(function () {\n    return primitiveDef.targets !== undefined ? addMorphTargets(geometry, primitiveDef.targets, parser) : geometry;\n  });\n}\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\n\n\nfunction toTrianglesDrawMode(geometry, drawMode) {\n  var index = geometry.getIndex(); // generate index if not present\n\n  if (index === null) {\n    var indices = [];\n    var position = geometry.getAttribute('position');\n\n    if (position !== undefined) {\n      for (var i = 0; i < position.count; i++) {\n        indices.push(i);\n      }\n\n      geometry.setIndex(indices);\n      index = geometry.getIndex();\n    } else {\n      console.error('THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.');\n      return geometry;\n    }\n  } //\n\n\n  var numberOfTriangles = index.count - 2;\n  var newIndices = [];\n\n  if (drawMode === TriangleFanDrawMode) {\n    // gl.TRIANGLE_FAN\n    for (var _i8 = 1; _i8 <= numberOfTriangles; _i8++) {\n      newIndices.push(index.getX(0));\n      newIndices.push(index.getX(_i8));\n      newIndices.push(index.getX(_i8 + 1));\n    }\n  } else {\n    // gl.TRIANGLE_STRIP\n    for (var _i9 = 0; _i9 < numberOfTriangles; _i9++) {\n      if (_i9 % 2 === 0) {\n        newIndices.push(index.getX(_i9));\n        newIndices.push(index.getX(_i9 + 1));\n        newIndices.push(index.getX(_i9 + 2));\n      } else {\n        newIndices.push(index.getX(_i9 + 2));\n        newIndices.push(index.getX(_i9 + 1));\n        newIndices.push(index.getX(_i9));\n      }\n    }\n  }\n\n  if (newIndices.length / 3 !== numberOfTriangles) {\n    console.error('THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.');\n  } // build final geometry\n\n\n  var newGeometry = geometry.clone();\n  newGeometry.setIndex(newIndices);\n  return newGeometry;\n}\n\nexport { GLTFLoader };","/** @jsxImportSource theme-ui */\nimport React, { useRef, useState, useEffect } from 'react'\nimport { Canvas, useFrame, useThree, useLoader } from '@react-three/fiber'\nimport { useThemeUI, useColorMode, jsx } from \"theme-ui\"\nimport { Plane, SpotLight, useHelper, softShadows, RoundedBox, useGLTF, useAnimations } from '@react-three/drei'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { PointLightHelper, CameraHelper, AudioListener, AudioLoader } from \"three\"\nimport TreeFile from \"../../static/models/Tree.gltf\"\nimport MountainFile from \"../../static/models/Mountains.gltf\"\nimport Beats from \"../../static/sounds/Website_Beats_0.mp3\"\nimport DancerFile from \"../../static/models/TakingdrakeDancing.gltf\"\n\nconst Tree = (props) => {\n  const ref = useRef()\n  const {nodes} = useLoader(GLTFLoader, TreeFile)\n\n  const geometries = Object.values(nodes)\n\n  return (\n    <group ref={ref} {...props}>\n      {\n        geometries.map(node => (\n          <mesh key={node.uuid} ref={ref} castShadow recieveShadow>\n            <bufferGeometry attach={\"geometry\"} {...node.geometry} />\n            <meshStandardMaterial attach={\"material\"} {...node.material} />\n          </mesh>\n        ))\n      }\n    </group>\n  )\n}\n\nconst Mountain = (props) => {\n  const ref = useRef()\n  const {nodes} = useLoader(GLTFLoader, MountainFile)\n\n  const geometries = Object.values(nodes)\n\n  return (\n    <group ref={ref} {...props}>\n      {\n        geometries.map(node => (\n          <mesh key={node.uuid} ref={ref} castShadow recieveShadow>\n            <bufferGeometry attach={\"geometry\"} {...node.geometry} />\n            <meshStandardMaterial attach={\"material\"} {...node.material} />\n          </mesh>\n        ))\n      }\n    </group>\n  )\n}\n\nconst Ground = (props) => {\n  const ref = useRef()\n\n  return (\n      <Plane receiveShadow {...props} ref={ref} rotation={[-1.6,0,0]} position={[0,-0,0]} args={[1000,1000]}>\n        <meshPhongMaterial color=\"green\" />\n      </Plane>\n  )\n}\n\nconst Dancer = (props) => {\n  const dancer = useRef()\n  const gltf = useGLTF(DancerFile)\n  const {nodes, materials, animations} = gltf\n  const { ref, mixer, names, actions, clips } = useAnimations(animations, dancer)\n\n  useEffect(() => {\n    actions[\"Armature|mixamo.com|Layer0\"].play()\n  });\n\n  return (\n    <group ref={ref} dispose={null} position={[0,.5,5]} rotation={[Math.PI / 2, 0, 0]} scale={4}>\n      <primitive object={nodes?.mixamorigHips} />\n      <skinnedMesh\n        castShadow\n        receiveShadow\n        scale={1000}\n        geometry={nodes?.Man__Cube004.geometry}\n        skeleton={nodes?.Man__Cube004.skeleton}\n      >\n        <meshStandardMaterial attach={\"material\"} color={\"black\"} />\n      </skinnedMesh>\n    </group>\n  )\n}\n\nconst Sound = (props) => {\n  const sound = useRef()\n  const { camera } = useThree()\n  const [listener] = useState(() => new AudioListener())\n  const buffer = useLoader(AudioLoader, Beats)\n  \n  const [volume, setVolume] = useState(1)\n  \n  useEffect(() => {\n    sound.current.setBuffer(buffer)\n    sound.current.setVolume(volume)\n    sound.current.setLoop(true)\n    sound.current.play()\n    camera.add(listener)\n  }, [])\n  return <audio ref={sound} args={[listener]} />\n}\n\nconst StageLight = (props) => {\n\n  const [color, setColor] = useState()\n\n  const { theme } = props\n  const colors = [...Object.values(theme.rawColors)].filter(color => typeof color == \"string\")\n\n  useFrame(() => {\n    if(Math.random() > .95){\n      setColor(colors[Math.floor(Math.random()*colors.length)])\n    }\n  })\n\n  return (\n    <SpotLight\n      castShadow\n      position={[50,90,90]}\n      color={color}\n      intensity={1}\n      angle={.25}\n      attenuation={10}\n      anglePower={5}\n      power={50}\n      distance={1000}\n      {...props}\n    />\n  )\n}\n\nconst Lighting = (props) => {\n  const ref = useRef()\n  useHelper(ref, PointLightHelper, .5, \"hotpink\")\n\n  return (\n    <group ref={ref}>\n      <StageLight\n        {...props}\n      />\n      <StageLight\n        {...props}\n        position={[-50,90,90]}\n      />\n      <pointLight\n        intensity={1}\n        position={[0, 30, 0]}\n        shadow-mapSize-width={168000}\n        shadow-mapSize-height={8000}\n        shadow-radius={8}\n        castShadow\n      />\n    </group>\n\n  )\n}\n\nconst LightTile = (props) => {\n  const ref = useRef()\n\n  const [color, setColor] = useState()\n\n  const { theme } = props\n\n  const colors = [...Object.values(theme.rawColors)].filter(color => typeof color == \"string\")\n\n  useFrame(() => {\n    if(Math.random() > .99){\n      setColor(colors[Math.floor(Math.random()*colors.length)])\n    }\n  })\n\n  return (\n    <RoundedBox recieveShadow {...props} ref={ref} args={[10,1,10]}>\n      <meshStandardMaterial color={color}  metalness={1}/>\n    </RoundedBox>\n  )\n}\n\nconst DanceFloor = ({theme}) => {\n  const ref = useRef()\n\n  let tileLocations = [...Array(9).keys()].flatMap(x => [...Array(9).keys()].map(y => [-44 + (x*11),0,-44 + (y*11)]))\n\n  useFrame(() => {\n    ref.current.rotation.y += .002\n  })\n\n  return (\n    <group ref={ref}>\n      <Lighting theme={theme}/>\n      <Sound/>\n      <Dancer/>\n      <RoundedBox recieveShadow args={[100,2,100]} position={[0,-1,0]} radius={.2}>\n        <meshStandardMaterial color={\"black\"}  metalness={1}/>\n      </RoundedBox>\n      {tileLocations.map(x =>\n        <LightTile position={x} theme={theme}/>\n      )}\n    </group>\n  )\n}\n\n\nexport { Tree, Ground, Lighting, Mountain, DanceFloor, LightTile, Sound }","import React from \"react\"\nimport { Box, useThemeUI } from \"theme-ui\"\nimport Layout from \"../components/layout/Layout\"\nimport SEO from '../components/seo'\nimport { Canvas } from '@react-three/fiber'\nimport { DanceFloor } from \"../components/models/tree\"\n\nconst ThreeJS = () => {\n\n  const { theme } = useThemeUI()\n\n  return (\n    <Layout>\n      <SEO title={\"Home\"} description={\"\"} />\n      <Box sx={{height: \"100vh\"}}>\n        <Canvas camera={{position: [0,50,90]}}>\n          <DanceFloor theme={theme}/>\n        </Canvas>\n      </Box>\n    </Layout>\n  )\n}\n\nexport default ThreeJS;"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","this","arguments","apply","Loader","GLTFRegistry","objects","get","key","add","object","remove","removeAll","EXTENSIONS","KHR_BINARY_GLTF","KHR_DRACO_MESH_COMPRESSION","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_UNLIT","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_TEXTURE_TRANSFORM","KHR_MESH_QUANTIZATION","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","GLTFLightsExtension","parser","cache","refs","uses","nodeDefs","json","nodes","nodeIndex","nodeLength","nodeDef","extensions","undefined","light","_addNodeRef","lightIndex","cacheKey","dependency","lightNode","lightDef","lights","color","Color","fromArray","range","type","DirectionalLight","target","position","set","PointLight","distance","SpotLight","spot","innerConeAngle","outerConeAngle","Math","PI","angle","penumbra","Error","decay","intensity","createUniqueName","Promise","resolve","self","_loadLight","then","_getNodeRef","GLTFMaterialsUnlitExtension","MeshBasicMaterial","materialParams","materialDef","pending","opacity","metallicRoughness","pbrMetallicRoughness","baseColorFactor","array","baseColorTexture","push","assignTexture","sRGBEncoding","all","GLTFMaterialsClearcoatExtension","materialIndex","materials","MeshPhysicalMaterial","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","Vector2","GLTFMaterialsSheenExtension","sheenColor","sheenRoughness","sheen","sheenColorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","GLTFMaterialsTransmissionExtension","transmissionFactor","transmission","transmissionTexture","GLTFMaterialsVolumeExtension","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","GLTFMaterialsIorExtension","ior","GLTFMaterialsSpecularExtension","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","GLTFTextureBasisUExtension","textureIndex","textureDef","textures","loader","options","ktx2Loader","extensionsRequired","indexOf","loadTextureImage","source","GLTFTextureWebPExtension","isSupported","images","textureLoader","uri","handler","manager","getHandler","detectSupport","loadTexture","image","Image","src","onload","onerror","height","GLTFMeshoptCompression","index","bufferView","bufferViews","extensionDef","buffer","getDependency","decoder","meshoptDecoder","supported","ready","res","byteOffset","byteLength","count","stride","byteStride","ArrayBuffer","Uint8Array","decodeGltfBuffer","mode","filter","BINARY_EXTENSION_HEADER_MAGIC","BINARY_EXTENSION_CHUNK_TYPES","GLTFBinaryExtension","data","content","body","headerView","DataView","header","magic","LoaderUtils","version","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","GLTFDracoMeshCompressionExtension","dracoLoader","preload","primitive","bufferViewIndex","gltfAttributeMap","attributes","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","_attributeName","_threeAttributeName","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","geometry","_attributeName2","attribute","GLTFTextureTransformExtension","texture","transform","texCoord","console","warn","offset","rotation","clone","repeat","needsUpdate","GLTFMeshStandardSGMaterial","_MeshStandardMaterial","_super2","params","_this2","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","replace","defineProperties","v","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","setValues","copy","MeshStandardMaterial","GLTFMaterialsPbrSpecularGlossinessExtension","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularGlossinessTexture","specGlossMapDef","material","fog","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","GLTFMeshQuantizationExtension","GLTFCubicSplineInterpolant","_Interpolant","_super3","parameterPositions","sampleValues","sampleSize","resultBuffer","values","valueSize","Interpolant","beforeStart_","copySampleValue_","afterEnd_","interpolate_","i1","t0","t","t1","stride2","stride3","td","p","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","_q","Quaternion","GLTFCubicSplineQuaternionInterpolant","_GLTFCubicSplineInter","_super4","normalize","toArray","WEBGL_CONSTANTS","Int8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","assign","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","_i3","_il2","createAttributesKey","attributesKey","keys","sort","getNormalizedComponentScale","GLTFParser","plugins","associations","Map","primitiveCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","createImageBitmap","navigator","userAgent","ImageBitmapLoader","TextureLoader","setCrossOrigin","crossOrigin","setRequestHeader","requestHeader","fileLoader","FileLoader","setResponseType","setWithCredentials","onLoad","onError","_invokeAll","ext","_markDefs","beforeRoot","getDependencies","dependencies","scene","scenes","animations","cameras","asset","afterRoot","catch","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","camera","_this3","ref","updateMappings","original","mappings","_step","_iterator","children","entries","_step$value","func","unshift","loadScene","loadNode","_invokeOne","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","reject","load","path","bufferViewDef","accessorIndex","sparse","pendingBufferViews","indices","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sourceIndex","sourceDef","sampler","promise","loadImageSource","flipY","samplers","magFilter","minFilter","wrapS","wrapT","URL","webkitURL","sourceURI","isObjectURL","blob","Blob","mimeType","createObjectURL","isImageBitmapLoader","imageBitmap","Texture","revokeObjectURL","search","error","mapName","mapDef","encoding","gltfReference","extendTexture","useDerivativeTangents","tangent","useVertexColors","useFlatShading","normal","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","_cacheKey","lineMaterial","LineBasicMaterial","_cacheKey2","cachedMaterial","vertexColors","flatShading","y","uv2","uv","setAttribute","materialType","materialExtensions","sgExtension","getMaterialType","extendParams","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","extendMaterialParams","doubleSided","side","DoubleSide","alphaMode","transparent","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","createMaterial","originalName","sanitizedName","PropertyBinding","primitives","createDracoPrimitive","decodePrimitive","addPrimitiveAttributes","primitiveDef","dracoExtension","cached","geometryPromise","BufferGeometry","meshIndex","depthTest","FrontSide","loadGeometries","results","geometries","_i4","_il3","_material","SkinnedMesh","Mesh","skinWeight","normalizeSkinWeights","toTrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","Line","LineLoop","Points","morphAttributes","assignFinalMaterial","_i5","_il4","group","Group","_i6","_il5","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","id","input","parameters","output","inputAccessors","outputAccessors","targets","tracks","_loop","_i7","_il6","inputAccessor","outputAccessor","updateMatrix","matrixAutoUpdate","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","traverse","outputArray","scaled","j","jl","_j","_jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","isMesh","meshPromise","nodeName","createNodeMesh","createNodeAttachment","forEach","Bone","Object3D","matrix","Matrix4","applyMatrix4","quaternion","has","sceneIndex","sceneDef","nodeIds","buildNodeHierarchy","_step2","reducedAssociations","_iterator2","_step2$value","reduceAssociations","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","bind","Skeleton","matrixWorld","child","assignAttributeAccessor","gltfAttributeName","setIndex","box","Box3","min","max","Vector3","boxScale","multiplyScalar","maxDisplacement","vector","_accessor","_min","_max","abs","_boxScale","expandByVector","boundingBox","sphere","Sphere","getCenter","center","radius","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","hasMorphColor","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","_i2","_il","_target","pendingAccessor","_pendingAccessor","_pendingAccessor2","morphPositions","morphNormals","morphColors","morphTargetsRelative","addMorphTargets","drawMode","getIndex","getAttribute","numberOfTriangles","newIndices","_i8","getX","_i9","newGeometry","Dancer","props","dancer","useRef","gltf","useGLTF","DancerFile","useAnimations","actions","mixer","names","clips","useEffect","play","dispose","mixamorigHips","castShadow","receiveShadow","Man__Cube004","skeleton","attach","Sound","sound","useThree","listener","useState","AudioListener","useLoader","AudioLoader","Beats","volume","current","setBuffer","setVolume","setLoop","args","StageLight","setColor","theme","colors","rawColors","useFrame","random","attenuation","anglePower","power","Lighting","useHelper","PointLightHelper","LightTile","RoundedBox","recieveShadow","DanceFloor","tileLocations","flatMap","x","useThemeUI","Layout","title","description","sx"],"sourceRoot":""}